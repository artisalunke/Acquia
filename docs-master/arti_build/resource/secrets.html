
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Storing sensitive information outside of your codebase &#8212; Acquia Help Center</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/foundation-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/what-input/what-input.min.js"></script>
    <script type="text/javascript" src="../_static/foundation-sites/foundation.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Acquia Tutorials" href="../tutorials.html" />
    <link rel="prev" title="How to install a Drupal 8 module" href="module-install-d8.html" /> 
  </head>
  <body>

    
<header>
<div class="topbar">
    <div class="col left">
        <a href="/" title="Acquia Help Center Home" class="logo">Acquia Help Center</a>
    </div>
    <div class="col right">
      <ul class="main-nav">
        <li>
          <a href="https://www.acquia.com" title="Go to www.acquia.com for our latest information.">Acquia.com</a>
        </li>
        <li>
            <a href="https://dev.acquia.com" title="Acquia's Developer Center: developers.acquia.com">Developers</a>
        </li>
        <li>
            <a href="https://training.acquia.com" title="Go to training.acquia.com to find out about courses and certifications.">Training</a>
        </li>
        <li>
            <a href="/site-search" data-drupal-link-system-path="site-search">Search</a>
        </li>
      </ul>
    </div>
</div>
<div class="bottombar">
    <div class="searchbar-wrapper">
        <form action="search.html" method="get" class="searchbar">
            <div class="search-title">Need help finding something? <strong>Start Here.</strong></div>
            <div class="search-box">
                <input type="search" name="q" maxlength="128" size="15" value="" class="st-default-search-input">
                <input type="hidden" name="check_keywords" value="yes">
                <input type="hidden" name="area" value="default">
            </div>
            <div class="search-btn">
                <input class="btn-search button" type="submit" id="edit-submit-acquia-search" value="Search Docs">
            </div>
        </form>
    </div>
	</div>
</header>



    
<div class="breadcrumbs-wrapper">
	<ul>
        
        <li><a href="../index.html">Home</a></li>
        
        <li><a href="../resource.html" accesskey="U">Resources</a></li>
        <li class="current">Storing sensitive information outside of your codebase</li>
	</ul>
</div>


<div class="row">
    
        
  <div class="small-4 large-3 columns" id="sidebar" data-sticky-container>
      <div class="sticky" data-sticky data-margin-top="0"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../acquia-cloud.html">Acquia Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../edge.html">Acquia Cloud Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shield.html">Acquia Cloud Shield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../site-factory.html">Acquia Cloud Site Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commerce.html">Acquia Commerce Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dam.html">Acquia DAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-desktop.html">Acquia Dev Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../journey.html">Acquia Journey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lift.html">Acquia Lift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Acquia Platform APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acquia-search.html">Acquia Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Developer tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lightning.html">Lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Acquia Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ra.html">Remote Administration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../resource.html">Resources</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="browser-tool.html">Browser developer tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="composer.html">Using Composer with Drupal 8 sites</a></li>
<li class="toctree-l2"><a class="reference internal" href="governance.html">Planning your governance strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="module-install-d7.html">How to install a Drupal 7 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="module-install-d8.html">How to install a Drupal 8 module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Storing sensitive information outside of your codebase</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Acquia Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide.html">Products and Services Guide</a></li>
</ul>

      </div>
  </div>
    
    <div id="content" class="small-8 large-9 columns">
        
            
  <div class="section" id="storing-sensitive-information-outside-of-your-codebase">
<h1>Storing sensitive information outside of your codebase<a class="headerlink" href="#storing-sensitive-information-outside-of-your-codebase" title="Permalink to this headline">¶</a></h1>
<p>From time to time, your website may need access to sensitive
credentials, passwords, or other private information to be available in
order to function properly, but the information must not be stored in
your version control repository for privacy reasons.</p>
<p>For example, the following modules or third-party integrations may
require a secret or access key:</p>
<ul class="simple">
<li>Drupal modules (Shield)</li>
<li>Amazon S3 configuration variables (<code class="docutils literal"><span class="pre">s3fs_awssdk2_access_key</span></code>,
<code class="docutils literal"><span class="pre">s3fs_awssdk2_secret_key</span></code>, <code class="docutils literal"><span class="pre">s3fs_bucket</span></code>)</li>
<li>Google Cloud Messaging integration variables
(<code class="docutils literal"><span class="pre">push_notifications_gcm_api_key</span></code>)</li>
<li>Google CAPTCHA variables (<code class="docutils literal"><span class="pre">recaptcha_secret_key</span></code>,
<code class="docutils literal"><span class="pre">recaptcha_site_key</span></code>)</li>
</ul>
<p>To make this information available only to your website, while keeping
it out of your codebase, use one of the following methods:</p>
<ul class="simple">
<li><a class="reference external" href="#secrets-settings-php-file">Create a <code class="docutils literal"><span class="pre">secrets.settings.php</span></code> file</a></li>
<li><a class="reference external" href="#nobackup-directory">Create a <code class="docutils literal"><span class="pre">nobackup</span></code> directory</a> that contains your sensitive data</li>
</ul>
<div class="section" id="secrets-settings-php-file">
<h2><code class="docutils literal"><span class="pre">secrets.settings.php</span></code> file<a class="headerlink" href="#secrets-settings-php-file" title="Permalink to this headline">¶</a></h2>
<p>Storing sensitive credentials in a secrets file instead of your
website’s database means your sensitive data will not be present in your
database backups, allowing you to distribute database backups to team
members who may need a database snapshot but not full access to external
systems.</p>
<p>To create and use a secrets file with your website, complete the
following steps:</p>
<ol class="arabic">
<li><p class="first"><a class="reference external" href="/acquia-cloud/ssh">Connect to your server</a> using SSH</p>
</li>
<li><p class="first">Navigate to the <code class="docutils literal"><span class="pre">/mnt/files/[sitename].[env]/</span></code> directory, where
<code class="docutils literal"><span class="pre">[sitename]</span></code> is your website’s name and <code class="docutils literal"><span class="pre">[env]</span></code> is your website’s
environment.</p>
</li>
<li><p class="first">Create the <code class="docutils literal"><span class="pre">secrets.settings.php</span></code> file if it does not already
exist.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Do not create the file in
<code class="docutils literal"><span class="pre">/mnt/gfs/[sitename].[env]/files/</span></code>, as files in that directory are
publicly accessible.</p>
</div>
</li>
<li><p class="first">To make the secrets file available to your application, add the lines
in the following example to the appropriate location based on your
installed product:</p>
<ul>
<li><p class="first"><em>Acquia Cloud</em> - To your website’s <code class="docutils literal"><span class="pre">settings.php</span></code> file</p>
</li>
<li><p class="first"><em>Acquia Cloud Site Factory</em> - To a
<a class="reference external" href="/site-factory/extend/hooks/settings-php">post-settings-php hook</a>
named <code class="docutils literal"><span class="pre">secrets.php</span></code></p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="x">$secrets_file = sprintf(&#39;/mnt/files/%s.%s/secrets.settings.php&#39;, $_ENV[&#39;AH_SITE_GROUP&#39;],$_ENV[&#39;AH_SITE_ENVIRONMENT&#39;]);</span>

<span class="x">if (file_exists($secrets_file)) {</span>
<span class="x">   require $secrets_file;</span>
<span class="x">}</span>
</pre></div>
</div>
</li>
</ul>
<p>Because the code uses <code class="docutils literal"><span class="pre">$_ENV['AH_SITE_ENVIRONMENT']</span></code> to build the
link to the <code class="docutils literal"><span class="pre">secrets.settings.php</span></code> file, it is possible to provide
unique files for each of your website’s environments.</p>
</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">It is important you keep your own backups of your
<code class="docutils literal"><span class="pre">secrets.settings.php</span></code> file. Because this location is outside of your
website’s files area, the Acquia Cloud Site Factory
<a class="reference external" href="/site-factory/manage/website/backup">full-website backups</a> will not
back up this file.</p>
</div>
</div>
<div class="section" id="nobackup-directory">
<h2><code class="docutils literal"><span class="pre">nobackup</span></code> directory<a class="headerlink" href="#nobackup-directory" title="Permalink to this headline">¶</a></h2>
<p>You can also create a special <code class="docutils literal"><span class="pre">nobackup</span></code> directory where you can place
files that contain sensitive credentials. For information about using
this method, see
<a class="reference external" href="/acquia-cloud/manage/files/system-files/private">Storing private information in the file system</a>.</p>
</div>
</div>


        
    </div>
</div>

    
<div class="row">
    <div class="small-4 large-3 columns"></div>
    <div id="relinks" class="small-8 large-9 columns">
        <div class="pagination-wrapper">
            <div class="prev">
                <a href="module-install-d8.html" title="How to install a Drupal 8 module"><b>‹&nbsp;</b>How to install a Drupal 8 module</a>
            </div>
            
            <div class="next">
                <a href="../tutorials.html" title="Acquia Tutorials">Acquia Tutorials<b>&nbsp;›</b></a>
            </div>
            
        </div>
    </div>
</div>



    
<div class="assistance-wrapper">
	<div class="assistance-tbl">
		<div class="col">
			<p><img src="/_static/phone.png" alt="Contact support">Still need assistance? <strong><a href="https://docs.acquia.com/support">Contact Acquia Support</a></strong></p>
		</div>
	</div>
</div>
<div class="support">
	<div class="support-tbl">
		<div class="col left">
			<h2><a href="https://www.acquia.com/customer-success/acquia-global-support">Support</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/support">Contact Support</a></li>
			</ul>
		</div>
		<div class="col middle">
			<h2><a href="https://www.acquia.com/about-us">About Acquia</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/about-us">About Us</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/leadership">Leadership</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/board">Board of Directors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/investors">Investors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/newsroom">Newsroom</a></li>
				<li><a class="light-link" href="https://www.acquia.com/careers">Careers</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/contact">Contact Us</a></li>
			</ul>
			<ul class="social-media">
				<li>
					<a class="fa fa-twitter fa-lg ext" href="https://twitter.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Twitter</span>
					</a>
				</li>
				<li>
					<a class="fa fa-facebook fa-lg ext" href="https://www.facebook.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Facebook</span>
					</a>
				</li>
				<li>
					<a class="fa fa-github-alt fa-lg ext" href="https://github.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Github</span>
					</a>
				</li>
				<li>
					<a class="fa fa-linkedin-in fa-lg ext" href="http://www.linkedin.com/company/167056" target="_blank" rel="nofollow">
						<span class="hide">LinkedIn</span>
					</a>
				</li>
				<li>
					<a class="fa fa-google-plus-g fa-lg ext" href="https://plus.google.com/+acquia" target="_blank" rel="nofollow">
						<span class="hide">Google+</span>
					</a>
				</li>
				<li>
					<a class="fa fa-play fa-lg ext" href="https://www.youtube.com/user/AcquiaTV" target="_blank" rel="nofollow">
						<span class="hide">YouTube</span>
					</a>
				</li>
				<li>
					<a class="fa fa-envelope fa-lg" href="https://www.acquia.com/about-us/contact">
						<span class="hide">Contact Us</span>
					</a>
				</li>
			</ul>
		</div>
		<div class="col right">
			<div class="centered">
				<p>
					<img alt="Acquia: Think Ahead" src="/_static/acquia-logo-think-ahead-black-small.svg">
				</p>
				<p class="margin-left-half">
					<span>53 State Street, 10th Floor<br>
					Boston, MA 02109<br>
					United States<br>
					Phone: 888-922-7842</span><br>
					Map: <a class="decorate ext" href="http://maps.google.com/?q=42.358429+-71.056184+%2853+State+Street%2C+10th+Floor%2C+Boston%2C+MA%2C+02109%2C+us%29" target="_blank" rel="nofollow">Google Maps<span class="ext"><span class="element-invisible"> </span></span></a><br><a class="decorate" href="https://www.acquia.com/about-us/contact#block-views-locations-block-1">View other locations</a>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="top-bar row column">
	<div class="footer" role="contentinfo">Copyright &copy 2018 Acquia Inc. All Rights Reserved. </br>Drupal is a registered trademark of <a href="https://dri.es/">Dries Buytaert</a>. All product names, logos, and brands are property of their respective owners.
    </div>
</div>
    </div>

    <script> $(document).foundation() </script>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','2_Wi1aQvEeu61haxG8TX','2.0.0');
    </script>

  </body>
</html>