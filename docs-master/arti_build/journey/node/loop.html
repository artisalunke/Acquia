
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Loop node &#8212; Acquia Help Center</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/foundation-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/what-input/what-input.min.js"></script>
    <script type="text/javascript" src="../../_static/foundation-sites/foundation.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Managed Graph node" href="managed-graph.html" />
    <link rel="prev" title="JavaScript node" href="javascript.html" /> 
  </head>
  <body>

    
<header>
<div class="topbar">
    <div class="col left">
        <a href="/" title="Acquia Help Center Home" class="logo">Acquia Help Center</a>
    </div>
    <div class="col right">
      <ul class="main-nav">
        <li>
          <a href="https://www.acquia.com" title="Go to www.acquia.com for our latest information.">Acquia.com</a>
        </li>
        <li>
            <a href="https://dev.acquia.com" title="Acquia's Developer Center: developers.acquia.com">Developers</a>
        </li>
        <li>
            <a href="https://training.acquia.com" title="Go to training.acquia.com to find out about courses and certifications.">Training</a>
        </li>
        <li>
            <a href="/site-search" data-drupal-link-system-path="site-search">Search</a>
        </li>
      </ul>
    </div>
</div>
<div class="bottombar">
    <div class="searchbar-wrapper">
        <form action="search.html" method="get" class="searchbar">
            <div class="search-title">Need help finding something? <strong>Start Here.</strong></div>
            <div class="search-box">
                <input type="search" name="q" maxlength="128" size="15" value="" class="st-default-search-input">
                <input type="hidden" name="check_keywords" value="yes">
                <input type="hidden" name="area" value="default">
            </div>
            <div class="search-btn">
                <input class="btn-search button" type="submit" id="edit-submit-acquia-search" value="Search Docs">
            </div>
        </form>
    </div>
	</div>
</header>



    
<div class="breadcrumbs-wrapper">
	<ul>
        
        <li><a href="../../index.html">Home</a></li>
        
        <li><a href="../../journey.html" >Acquia Journey</a></li>
        <li><a href="../node.html" accesskey="U">Nodes in Acquia Journey</a></li>
        <li class="current">Loop node</li>
	</ul>
</div>


<div class="row">
    
        
  <div class="small-4 large-3 columns" id="sidebar" data-sticky-container>
      <div class="sticky" data-sticky data-margin-top="0"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../acquia-cloud.html">Acquia Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../edge.html">Acquia Cloud Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../shield.html">Acquia Cloud Shield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../site-factory.html">Acquia Cloud Site Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commerce.html">Acquia Commerce Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dam.html">Acquia DAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-desktop.html">Acquia Dev Desktop</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../journey.html">Acquia Journey</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../access.html">Signing in to Acquia Journey</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adaptors.html">Acquia Journey adaptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin.html">Administering Acquia Journey</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cond.html">Conditions and expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connect.html">Managing Acquia Journey connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data.html">Acquia Journey data structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html">Getting started with Acquia Journey</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Acquia Journey glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../known-issues.html">Known issues in Acquia Journey</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mapper.html">Acquia Journey Mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">About metrics and goals</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../node.html">Nodes in Acquia Journey</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="2d-table.html">2D Table node</a></li>
<li class="toctree-l3"><a class="reference internal" href="ab.html">Split Test node</a></li>
<li class="toctree-l3"><a class="reference internal" href="columnar-table.html">Columnar Table node</a></li>
<li class="toctree-l3"><a class="reference internal" href="comment.html">Comment node</a></li>
<li class="toctree-l3"><a class="reference internal" href="conditional.html">Conditional node</a></li>
<li class="toctree-l3"><a class="reference internal" href="decision-tree.html">Decision Tree node</a></li>
<li class="toctree-l3"><a class="reference internal" href="get.html">Get node</a></li>
<li class="toctree-l3"><a class="reference internal" href="ghost.html">Ghost node</a></li>
<li class="toctree-l3"><a class="reference internal" href="javascript.html">JavaScript node</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Loop node</a></li>
<li class="toctree-l3"><a class="reference internal" href="managed-graph.html">Managed Graph node</a></li>
<li class="toctree-l3"><a class="reference internal" href="r-model.html">R Model node</a></li>
<li class="toctree-l3"><a class="reference internal" href="return.html">Return node</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html">Set node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html">Release notes - Acquia Journey</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html">Acquia Journey troubleshooting guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Creating and managing versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../lift.html">Acquia Lift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">Acquia Platform APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../acquia-search.html">Acquia Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Developer tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lightning.html">Lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Acquia Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ra.html">Remote Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resource.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">Acquia Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide.html">Products and Services Guide</a></li>
</ul>

      </div>
  </div>
    
    <div id="content" class="small-8 large-9 columns">
        
            
  <div class="section" id="loop-node">
<h1>Loop node<a class="headerlink" href="#loop-node" title="Permalink to this headline">¶</a></h1>
<p><img alt="Loop node" class="no-sb float-left logo-sm-lift" src="https://cdn3.webdamdb.com/1280_UUrX7RLK6y73.png?1526475471" /></p>
<p>The Loop node allows a sub-graph to be executed many times from the same
position in a graph.</p>
<p>To use a loop node you will need a schema location that typically
contains a JavaScript array and a graph to process each element in the
array.</p>
<p><a class="reference internal" href="https://cdn3.webdamdb.com/1280_otbT3Zjrcw52.png?1526475981"><img alt="Loop Node example" src="https://cdn3.webdamdb.com/1280_otbT3Zjrcw52.png?1526475981" style="width: 638px; height: 218px;" /></a></p>
<p>The loop node will call the graph once for each entry in the array
sequentially. If the data provided to the loop node is not a JavaScript
array it will be converted into an array of length one. Arrays can often
be returned by web services or database end points.</p>
<div class="section" id="creating-a-loop-node">
<h2>Creating a Loop Node<a class="headerlink" href="#creating-a-loop-node" title="Permalink to this headline">¶</a></h2>
<p>Unlike other node types, Loop Nodes can only be added directly <a class="reference external" href="/journey/getting-started/graph">from an
existing graph</a>, and not through the
<strong>New</strong> menu option. To add a Loop Node to a graph:</p>
<ol class="arabic simple">
<li>On the <strong>Home Screen</strong>, identify the project you want to customize.</li>
<li>In the project’s tile, click the <strong>Project Editor</strong> <a class="reference internal" href="https://cdn4.webdamdb.com/100th_sm_YcVG2zY8pZL5.png?1526475783"><img alt="Project Editor icon" src="https://cdn4.webdamdb.com/100th_sm_YcVG2zY8pZL5.png?1526475783" style="width: 33px; height: 29px;" /></a> icon.</li>
<li>Double-click the graph you want to edit.</li>
<li>In the white background of the Graph, right-click and choose <strong>Add
Node to Graph</strong>.</li>
<li>Scroll down to the <strong>Basic Nodes</strong> section, and click <strong>Loop</strong>.</li>
<li>Click <strong>Add Loop</strong>.</li>
<li>In the right-hand sidebar, scroll to the <strong>Edit Loop Node</strong> panel and
click the <strong>Expand</strong> <a class="reference internal" href="https://cdn4.webdamdb.com/1280_2JkCGJsHGM10.png?1526475741"><img alt="Expand" src="https://cdn4.webdamdb.com/1280_2JkCGJsHGM10.png?1526475741" style="width: 34px; height: 32px;" /></a> icon.</li>
<li>In the fields provided, define your sources.</li>
<li>Click <strong>Replace Node</strong>.</li>
</ol>
<p>In this example graph the schema location <code class="docutils literal"><span class="pre">loopData</span></code> is being used,
and the <code class="docutils literal"><span class="pre">loopData</span></code> location is set to this value in the Set Node
below:</p>
<p><code class="docutils literal"><span class="pre">[{&quot;val&quot;:&quot;a&quot;},{&quot;val&quot;:&quot;b&quot;},{&quot;val&quot;:&quot;c&quot;}]</span></code></p>
<p><a class="reference internal" href="https://cdn3.webdamdb.com/1280_otbT3Zjrcw52.png?1526475981"><img alt="Loop Node example" src="https://cdn3.webdamdb.com/1280_otbT3Zjrcw52.png?1526475981" style="width: 638px; height: 218px;" /></a></p>
<p>The sub-graph just returns the ‘val’ attribute of the object:</p>
<p><a class="reference internal" href="https://cdn4.webdamdb.com/1280_plE5ZHhaEj34.png?1526475896"><img alt="Return value icon" src="https://cdn4.webdamdb.com/1280_plE5ZHhaEj34.png?1526475896" style="width: 205px; height: 167px;" /></a></p>
<p>The graph shows one transaction executing but the testing console will
show the iterations of the loop node and the Display JSON button will
show the state of the data store at the end of that iteration. The
output of the subgraph can be seen in each transaction as the loop node
iterates over the array.</p>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A loop node graph can not call itself and the graph will not appear
on the Using Graph dropdown</li>
<li>The loop node processes the array sequentially and the graph state is
global so that changes to the schema or a public variable in one
sub-graph will be available to the next sub-graph</li>
</ul>
</div>
<div class="section" id="another-example">
<h2>Another Example<a class="headerlink" href="#another-example" title="Permalink to this headline">¶</a></h2>
<p>This example will loop through an array of words and concatenate them
together into one sentence. Each time the loop runs it will concatenate
the next word onto the previous words slowly building the sentence. It
will return ‘true’ each loop and at the end the entire sentence will be
in one schema location.</p>
<p>This is the array of words:</p>
<p><code class="docutils literal"><span class="pre">[&quot;The&quot;,&quot;quick&quot;,&quot;brown&quot;,&quot;fox&quot;,&quot;jumps&quot;,&quot;over&quot;,&quot;the&quot;,&quot;lazy&quot;,&quot;dog.&quot;]</span></code></p>
<p>The set node below sets a schema location with this array of words which
is then used in the loop node.</p>
<p><a class="reference internal" href="https://cdn3.webdamdb.com/1280_EUYZ1O6Ia0g4.png?1526476094"><img alt="Loop Node location" src="https://cdn3.webdamdb.com/1280_EUYZ1O6Ia0g4.png?1526476094" style="width: 381px; height: 273px;" /></a></p>
<p>These are the two graphs. The upper picture is the main graph and the
bottom picture is the graph the loop runs with. The JavaScript node’s
output is stored in a separate schema location compared to where the
words are stored, the code is shown below along with the testing console
output.</p>
<p><a class="reference internal" href="https://cdn4.webdamdb.com/1280_2vv1r6uNdlK3.png?1526475766"><img alt="Loop Node code example" src="https://cdn4.webdamdb.com/1280_2vv1r6uNdlK3.png?1526475766" style="width: 304px; height: 134px;" /></a></p>
<p>The following screenshot shows each loop returning ‘true’ instead of any
value.</p>
<p><a class="reference internal" href="https://cdn4.webdamdb.com/1280_g3OJtir8oDu8.png?1526475816"><img alt="Loop Node returns true" src="https://cdn4.webdamdb.com/1280_g3OJtir8oDu8.png?1526475816" style="width: 650px; height: 320px;" /></a></p>
<p>The following screenshot shows the final result of the graphs.</p>
<p><a class="reference internal" href="https://cdn4.webdamdb.com/1280_LBnDSp29ej71.png?1526476144"><img alt="Loop Node final result" src="https://cdn4.webdamdb.com/1280_LBnDSp29ej71.png?1526476144" style="width: 550px; height: 281px;" /></a></p>
<p>The array of words is stored in the <code class="docutils literal"><span class="pre">data</span></code> portion of the schema while
the built sentence is stored in the <code class="docutils literal"><span class="pre">result</span></code> part of the schema, both
under the <code class="docutils literal"><span class="pre">aLoopExample</span></code> section.</p>
</div>
</div>


        
    </div>
</div>

    
<div class="row">
    <div class="small-4 large-3 columns"></div>
    <div id="relinks" class="small-8 large-9 columns">
        <div class="pagination-wrapper">
            <div class="prev">
                <a href="javascript.html" title="JavaScript node"><b>‹&nbsp;</b>JavaScript node</a>
            </div>
            
            <div class="next">
                <a href="managed-graph.html" title="Managed Graph node">Managed Graph node<b>&nbsp;›</b></a>
            </div>
            
        </div>
    </div>
</div>



    
<div class="assistance-wrapper">
	<div class="assistance-tbl">
		<div class="col">
			<p><img src="/_static/phone.png" alt="Contact support">Still need assistance? <strong><a href="https://docs.acquia.com/support">Contact Acquia Support</a></strong></p>
		</div>
	</div>
</div>
<div class="support">
	<div class="support-tbl">
		<div class="col left">
			<h2><a href="https://www.acquia.com/customer-success/acquia-global-support">Support</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/support">Contact Support</a></li>
			</ul>
		</div>
		<div class="col middle">
			<h2><a href="https://www.acquia.com/about-us">About Acquia</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/about-us">About Us</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/leadership">Leadership</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/board">Board of Directors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/investors">Investors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/newsroom">Newsroom</a></li>
				<li><a class="light-link" href="https://www.acquia.com/careers">Careers</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/contact">Contact Us</a></li>
			</ul>
			<ul class="social-media">
				<li>
					<a class="fa fa-twitter fa-lg ext" href="https://twitter.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Twitter</span>
					</a>
				</li>
				<li>
					<a class="fa fa-facebook fa-lg ext" href="https://www.facebook.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Facebook</span>
					</a>
				</li>
				<li>
					<a class="fa fa-github-alt fa-lg ext" href="https://github.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Github</span>
					</a>
				</li>
				<li>
					<a class="fa fa-linkedin-in fa-lg ext" href="http://www.linkedin.com/company/167056" target="_blank" rel="nofollow">
						<span class="hide">LinkedIn</span>
					</a>
				</li>
				<li>
					<a class="fa fa-google-plus-g fa-lg ext" href="https://plus.google.com/+acquia" target="_blank" rel="nofollow">
						<span class="hide">Google+</span>
					</a>
				</li>
				<li>
					<a class="fa fa-play fa-lg ext" href="https://www.youtube.com/user/AcquiaTV" target="_blank" rel="nofollow">
						<span class="hide">YouTube</span>
					</a>
				</li>
				<li>
					<a class="fa fa-envelope fa-lg" href="https://www.acquia.com/about-us/contact">
						<span class="hide">Contact Us</span>
					</a>
				</li>
			</ul>
		</div>
		<div class="col right">
			<div class="centered">
				<p>
					<img alt="Acquia: Think Ahead" src="/_static/acquia-logo-think-ahead-black-small.svg">
				</p>
				<p class="margin-left-half">
					<span>53 State Street, 10th Floor<br>
					Boston, MA 02109<br>
					United States<br>
					Phone: 888-922-7842</span><br>
					Map: <a class="decorate ext" href="http://maps.google.com/?q=42.358429+-71.056184+%2853+State+Street%2C+10th+Floor%2C+Boston%2C+MA%2C+02109%2C+us%29" target="_blank" rel="nofollow">Google Maps<span class="ext"><span class="element-invisible"> </span></span></a><br><a class="decorate" href="https://www.acquia.com/about-us/contact#block-views-locations-block-1">View other locations</a>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="top-bar row column">
	<div class="footer" role="contentinfo">Copyright &copy 2018 Acquia Inc. All Rights Reserved. </br>Drupal is a registered trademark of <a href="https://dri.es/">Dries Buytaert</a>. All product names, logos, and brands are property of their respective owners.
    </div>
</div>
    </div>

    <script> $(document).foundation() </script>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','2_Wi1aQvEeu61haxG8TX','2.0.0');
    </script>

  </body>
</html>