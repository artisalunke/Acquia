
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Adding external themes to your site &#8212; Acquia Help Center</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/foundation-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/what-input/what-input.min.js"></script>
    <script type="text/javascript" src="../../_static/foundation-sites/foundation.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Known issues in Acquia Cloud Site Factory" href="../known-issues.html" />
    <link rel="prev" title="Customizing site appearance" href="../theme.html" /> 
  </head>
  <body>

    
<header>
<div class="topbar">
    <div class="col left">
        <a href="/" title="Acquia Help Center Home" class="logo">Acquia Help Center</a>
    </div>
    <div class="col right">
      <ul class="main-nav">
        <li>
          <a href="https://www.acquia.com" title="Go to www.acquia.com for our latest information.">Acquia.com</a>
        </li>
        <li>
            <a href="https://dev.acquia.com" title="Acquia's Developer Center: developers.acquia.com">Developers</a>
        </li>
        <li>
            <a href="https://training.acquia.com" title="Go to training.acquia.com to find out about courses and certifications.">Training</a>
        </li>
        <li>
            <a href="/site-search" data-drupal-link-system-path="site-search">Search</a>
        </li>
      </ul>
    </div>
</div>
<div class="bottombar">
    <div class="searchbar-wrapper">
        <form action="search.html" method="get" class="searchbar">
            <div class="search-title">Need help finding something? <strong>Start Here.</strong></div>
            <div class="search-box">
                <input type="search" name="q" maxlength="128" size="15" value="" class="st-default-search-input">
                <input type="hidden" name="check_keywords" value="yes">
                <input type="hidden" name="area" value="default">
            </div>
            <div class="search-btn">
                <input class="btn-search button" type="submit" id="edit-submit-acquia-search" value="Search Docs">
            </div>
        </form>
    </div>
	</div>
</header>



    
<div class="breadcrumbs-wrapper">
	<ul>
        
        <li><a href="../../index.html">Home</a></li>
        
        <li><a href="../../site-factory.html" >Acquia Cloud Site Factory</a></li>
        <li><a href="../theme.html" accesskey="U">Customizing site appearance</a></li>
        <li class="current">Adding external themes to your site</li>
	</ul>
</div>


<div class="row">
    
        
  <div class="small-4 large-3 columns" id="sidebar" data-sticky-container>
      <div class="sticky" data-sticky data-margin-top="0"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../acquia-cloud.html">Acquia Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../edge.html">Acquia Cloud Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../shield.html">Acquia Cloud Shield</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../site-factory.html">Acquia Cloud Site Factory</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html">Release notes - Acquia Cloud Site Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compare.html">Acquia Cloud Site Factory and Drupal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acquia-cloud.html">Acquia Cloud Site Factory and Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend.html">Extending Acquia Cloud Site Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance.html">Governance on Acquia Cloud Site Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../monitor.html">Monitoring Acquia Cloud Site Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migrate.html">Preparing to migrate sites into Acquia Cloud Site Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html">Setting up your Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflow.html">Workflows in Acquia Cloud Site Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stacks.html">Using Site Factory Stacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manage.html">Managing your Acquia Cloud Site Factory sites</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../theme.html">Customizing site appearance</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Adding external themes to your site</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../known-issues.html">Known issues in Acquia Cloud Site Factory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../commerce.html">Acquia Commerce Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dam.html">Acquia DAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-desktop.html">Acquia Dev Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../journey.html">Acquia Journey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lift.html">Acquia Lift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">Acquia Platform APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../acquia-search.html">Acquia Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Developer tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lightning.html">Lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Acquia Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ra.html">Remote Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resource.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">Acquia Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide.html">Products and Services Guide</a></li>
</ul>

      </div>
  </div>
    
    <div id="content" class="small-8 large-9 columns">
        
            
  <div class="section" id="adding-external-themes-to-your-site">
<h1>Adding external themes to your site<a class="headerlink" href="#adding-external-themes-to-your-site" title="Permalink to this headline">¶</a></h1>
<p>During normal Drupal development, when you’re developing your website’s
themes, best practices would have you store a theme’s files in the
<code class="docutils literal"><span class="pre">sites/all/themes</span></code> directory under your docroot. However, what if you
want a design firm to create and maintain your websites’ theme files,
but you don’t want to provide them with complete access to your
website’s code?</p>
<p>Acquia Cloud Site Factory allows you to configure a link to an external Git
repository that contains one or more themes that can be used with a
Drupal website. After you connect your website to a Git repository that
contains one or more themes, the themes will appear when you click
<strong>Appearance</strong> in the admin menu.</p>
<div class="section" id="git-repository-requirements">
<h2>Git repository requirements<a class="headerlink" href="#git-repository-requirements" title="Permalink to this headline">¶</a></h2>
<p>When you are creating your external Git repository, be sure that it
contains the following items:</p>
<ul class="simple">
<li>One or more branches or tags.</li>
<li>One or more sets of Drupal theme files to use with your website. Each
theme’s files must be included in a separate directory whose name is
the name of the theme.</li>
</ul>
</div>
<div class="section" id="creating-a-theme-repository-whitelist">
<h2>Creating a theme repository whitelist<a class="headerlink" href="#creating-a-theme-repository-whitelist" title="Permalink to this headline">¶</a></h2>
<p>To protect hosted websites from using themes that contain settings or
code that could cause issues with the websites, you can add a whitelist
file of approved theme repositories to Acquia Cloud Site Factory. When
administrative users attempt to add a theme repository,
Acquia Cloud Site Factory compares the repository with the contents of the
<code class="docutils literal"><span class="pre">acsf_theme_whitelist.txt</span></code> file.</p>
<p>To create a new whitelist file for your theme repositories, complete the
following steps:</p>
<ol class="arabic simple">
<li>Create a new file to contain your whitelist settings, based on the
following conventions:<ul>
<li>Enter each external Git repository on a separate line.</li>
<li>You can add comments to entries by starting lines with the number
sign ( <code class="docutils literal"><span class="pre">#</span></code> ). The # will not be used for whitelist filtering.</li>
<li>Use the asterisk character ( <code class="docutils literal"><span class="pre">*</span></code> ) for wildcard entry.</li>
<li>If you do not end a repository line with an asterisk, its use is
implied.</li>
</ul>
</li>
<li>Save the file with the name <code class="docutils literal"><span class="pre">acsf_theme_whitelist.txt</span></code> in the root
directory of your code repository.</li>
<li>Commit your code changes with the new whitelist file to your
codebase.</li>
<li>Deploy the code to your production environment.</li>
</ol>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>The following whitelist file allows only theme repositories from the
Acquia organization on github.com, the Open Framework repository on
github.com, and the zen.git repository on drupal.org:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Allow any github repos from the Acquia organization</span>
<span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">acquia</span><span class="o">/*</span>

<span class="c1"># Allow specific github repo</span>
<span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">SU</span><span class="o">-</span><span class="n">SWS</span><span class="o">/</span><span class="n">open_framework</span>

<span class="c1"># Allow the Zen theme from Drupal.org</span>
<span class="n">git</span><span class="o">.</span><span class="n">drupal</span><span class="o">.</span><span class="n">org</span><span class="p">:</span><span class="n">project</span><span class="o">/</span><span class="n">zen</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>If you do not upload a whitelist file, or if the file does not contain
any entries, Acquia Cloud Site Factory will not block any theme repositories
from use.</p>
</div>
</div>
<div class="section" id="connecting-to-a-theme-repository">
<h2>Connecting to a theme repository<a class="headerlink" href="#connecting-to-a-theme-repository" title="Permalink to this headline">¶</a></h2>
<p>To connect to an external Git repository that contains one or more
themes, complete the following steps:</p>
<ol class="arabic simple">
<li>Sign in to the Site Factory Management Console using an account that’s been
assigned either the
<a class="reference external" href="/site-factory/manage/website/manage/roles/platform-admin">Platform admin</a>
or
<a class="reference external" href="/site-factory/manage/website/manage/roles/site-builder">Site builder</a>
role.</li>
<li>Find the website that you want to modify, open its actions menu, and
then click <strong>Manage theme repository</strong>.</li>
<li>Click <strong>Connect site repository</strong> to enter your Git repository’s
information.</li>
<li>Click the <strong>Show SSH public key</strong> link to display the SSH public key.</li>
<li>Select and copy the contents of the <strong>SSH public key</strong> field to your
clipboard.</li>
<li>Open a new browser tab, and sign in to your Git repository.</li>
<li>Add the SSH public key to the theme repository, and configure the key
to have read access.</li>
<li>Return to the page in which you’re entering your theme repository
information, and then enter the following values for the Git
repository that you want to use:<ul>
<li><strong>Git URL</strong> - The Git SSH URL of the theme repository (for
example, <code class="docutils literal"><span class="pre">git&#64;github.com:repo.git</span></code>)</li>
<li><strong>Branch or tag</strong> - A valid branch or tag from the theme
repository</li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To ensure that theme changes for one website do not affect other
websites that may use the same theme, we recommend that you use
discrete <em>tags</em> for production websites. Using <em>branches</em> is
recommended for staged websites, because it can speed your theme
development process.</p>
</div>
<ol class="arabic simple">
<li>Click <strong>Save</strong>.</li>
</ol>
<p>Theme repositories are compared to entries in the
<a class="reference external" href="#creating-a-theme-repository-whitelist">whitelist file</a> based on the following parameters:</p>
<ul class="simple">
<li>The <em>user&#64;</em> preceding the theme repository is ignored.</li>
<li>Theme repositories that begin with an exact match of one or more of
the whitelist file entries are accepted. For example, a whitelist
entry of <code class="docutils literal"><span class="pre">github.com</span></code> would match <code class="docutils literal"><span class="pre">git&#64;github.com:repo.git</span></code>.</li>
</ul>
<p>If the theme repository is blocked by the whitelist file,
Acquia Cloud Site Factory will display an error message and keep the previous
theme repository settings.</p>
<p>If there are no error messages, your Git repository themes will be
checked out for use by your website. After all of your theme files have
been checked out successfully, you can view the themes by signing in to
the website and clicking <strong>Appearance</strong> in the admin menu.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There may be a delay between associating your Git theme repository with
your website and the availability of its themes on the Appearance page.
For example, delays can be more noticeable during updates or staging
processes.</p>
</div>
</div>
<div class="section" id="refreshing-your-theme">
<h2>Refreshing your theme<a class="headerlink" href="#refreshing-your-theme" title="Permalink to this headline">¶</a></h2>
<p>Whenever you make changes to your theme files and those changes are
committed to the Git theme repository, you must update your websites’
theme files based on the correct branch or tag. You must update every
website that uses the updated theme.</p>
<p>Use one of the following methods to refresh your theme on a single
website:</p>
<ul class="simple">
<li><em>Refreshing your theme from the user interface</em><ol class="arabic">
<li>If you are refreshing a theme for a Drupal 8 stack, create a
<code class="docutils literal"><span class="pre">post-theme-deploy</span></code> hook script, as described in <a class="reference external" href="#performing-custom-actions-after-theme-deployments">Requirement
for deploying Drupal 8 themes</a>. This is needed to clear
the Twig cache after you deploy the updated theme.</li>
<li>Sign in to the Site Factory Management Console using an account that’s been
assigned either the
<a class="reference external" href="/site-factory/manage/website/manage/roles/platform-admin">Platform admin</a>
or
<a class="reference external" href="/site-factory/manage/website/manage/roles/site-builder">Site builder</a>
role.</li>
<li>Find the website that you want to modify, open its actions menu,
and then click <strong>Manage theme repository</strong>.</li>
<li>Select the appropriate method based on whether you are using a
branch (staged websites) or a tag (production websites):<ul>
<li><em>Branch</em>
Click <strong>Refresh themes</strong>.</li>
<li><em>Tag</em><ol class="loweralpha">
<li>Click the <strong>Change site theme repository</strong> link.</li>
<li>In the Branch or tag list, click the tag with the new theme
changes.</li>
<li>Click <strong>Save</strong>.</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>Acquia Cloud Site Factory obtains your new theme changes from the Git
repository and adds them to your website. After it makes copies of the
theme files, the theme changes will appear in the website’s Appearance
page (and if the theme is in use, on the website itself).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There may be a delay between associating your Git theme repository
with your website and the availability of its themes on the Appearance page.
For example, delays can be more noticeable during updates or staging
processes.</p>
</div>
<div class="section" id="performing-custom-actions-after-theme-deployments">
<h3>Performing custom actions after theme deployments<a class="headerlink" href="#performing-custom-actions-after-theme-deployments" title="Permalink to this headline">¶</a></h3>
<p>You can use the <code class="docutils literal"><span class="pre">post-theme-deploy</span></code> Factory hook to clear Twig caches
or perform other actions after deploying a theme. The
<code class="docutils literal"><span class="pre">post-theme-deploy</span></code> Factory hook makes a set of arguments available to
any script that the hook runs:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>The hosting site group</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>The hosting environment</td>
</tr>
<tr class="row-even"><td>3</td>
<td>The theme scope (currently the only possible value is <code class="docutils literal"><span class="pre">site</span></code>)</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>The theme event (possible values: <code class="docutils literal"><span class="pre">modify</span></code>, <code class="docutils literal"><span class="pre">delete</span></code>)</td>
</tr>
<tr class="row-even"><td>5</td>
<td>The site domain</td>
</tr>
</tbody>
</table>
<p>Using these arguments, you can create a script like the following, which
runs a Drush command to clear the Twig cache on the affected site on
every server. Acquia Cloud Site Factory supplies the needed host,
environment, and domain values:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>#!/bin/bash
drush8 @$1.$2 --uri=$5 ev &#39;\Drupal\Core\PhpStorage\PhpStorageFactory::get(&quot;twig&quot;)-&gt;deleteAll();&#39;
</pre></div>
</div>
<p>To deploy or update a Drupal 8 theme from a remote repository:</p>
<ol class="arabic simple">
<li>Create a script file with a name like <code class="docutils literal"><span class="pre">ClearTwigCache</span></code>, with
content similar to the previous example. The script must be
executable.</li>
<li>Save and commit the script file in your code repository in the
<code class="docutils literal"><span class="pre">/factory-hooks/post-theme-deploy</span></code> directory.</li>
</ol>
</div>
</div>
</div>


        
    </div>
</div>

    
<div class="row">
    <div class="small-4 large-3 columns"></div>
    <div id="relinks" class="small-8 large-9 columns">
        <div class="pagination-wrapper">
            <div class="prev">
                <a href="../theme.html" title="Customizing site appearance"><b>‹&nbsp;</b>Customizing site appearance</a>
            </div>
            
            <div class="next">
                <a href="../known-issues.html" title="Known issues in Acquia Cloud Site Factory">Known issues in Acquia Cloud Site Factory<b>&nbsp;›</b></a>
            </div>
            
        </div>
    </div>
</div>



    
<div class="assistance-wrapper">
	<div class="assistance-tbl">
		<div class="col">
			<p><img src="/_static/phone.png" alt="Contact support">Still need assistance? <strong><a href="https://docs.acquia.com/support">Contact Acquia Support</a></strong></p>
		</div>
	</div>
</div>
<div class="support">
	<div class="support-tbl">
		<div class="col left">
			<h2><a href="https://www.acquia.com/customer-success/acquia-global-support">Support</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/support">Contact Support</a></li>
			</ul>
		</div>
		<div class="col middle">
			<h2><a href="https://www.acquia.com/about-us">About Acquia</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/about-us">About Us</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/leadership">Leadership</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/board">Board of Directors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/investors">Investors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/newsroom">Newsroom</a></li>
				<li><a class="light-link" href="https://www.acquia.com/careers">Careers</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/contact">Contact Us</a></li>
			</ul>
			<ul class="social-media">
				<li>
					<a class="fa fa-twitter fa-lg ext" href="https://twitter.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Twitter</span>
					</a>
				</li>
				<li>
					<a class="fa fa-facebook fa-lg ext" href="https://www.facebook.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Facebook</span>
					</a>
				</li>
				<li>
					<a class="fa fa-github-alt fa-lg ext" href="https://github.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Github</span>
					</a>
				</li>
				<li>
					<a class="fa fa-linkedin-in fa-lg ext" href="http://www.linkedin.com/company/167056" target="_blank" rel="nofollow">
						<span class="hide">LinkedIn</span>
					</a>
				</li>
				<li>
					<a class="fa fa-google-plus-g fa-lg ext" href="https://plus.google.com/+acquia" target="_blank" rel="nofollow">
						<span class="hide">Google+</span>
					</a>
				</li>
				<li>
					<a class="fa fa-play fa-lg ext" href="https://www.youtube.com/user/AcquiaTV" target="_blank" rel="nofollow">
						<span class="hide">YouTube</span>
					</a>
				</li>
				<li>
					<a class="fa fa-envelope fa-lg" href="https://www.acquia.com/about-us/contact">
						<span class="hide">Contact Us</span>
					</a>
				</li>
			</ul>
		</div>
		<div class="col right">
			<div class="centered">
				<p>
					<img alt="Acquia: Think Ahead" src="/_static/acquia-logo-think-ahead-black-small.svg">
				</p>
				<p class="margin-left-half">
					<span>53 State Street, 10th Floor<br>
					Boston, MA 02109<br>
					United States<br>
					Phone: 888-922-7842</span><br>
					Map: <a class="decorate ext" href="http://maps.google.com/?q=42.358429+-71.056184+%2853+State+Street%2C+10th+Floor%2C+Boston%2C+MA%2C+02109%2C+us%29" target="_blank" rel="nofollow">Google Maps<span class="ext"><span class="element-invisible"> </span></span></a><br><a class="decorate" href="https://www.acquia.com/about-us/contact#block-views-locations-block-1">View other locations</a>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="top-bar row column">
	<div class="footer" role="contentinfo">Copyright &copy 2018 Acquia Inc. All Rights Reserved. </br>Drupal is a registered trademark of <a href="https://dri.es/">Dries Buytaert</a>. All product names, logos, and brands are property of their respective owners.
    </div>
</div>
    </div>

    <script> $(document).foundation() </script>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','2_Wi1aQvEeu61haxG8TX','2.0.0');
    </script>

  </body>
</html>