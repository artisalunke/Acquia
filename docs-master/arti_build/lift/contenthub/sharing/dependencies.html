
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Working with content dependencies &#8212; Acquia Help Center</title>
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/foundation-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/what-input/what-input.min.js"></script>
    <script type="text/javascript" src="../../../_static/foundation-sites/foundation.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Exporting multiple entities at once" href="export.html" />
    <link rel="prev" title="Deleting content from subscribing sites" href="delete.html" /> 
  </head>
  <body>

    
<header>
<div class="topbar">
    <div class="col left">
        <a href="/" title="Acquia Help Center Home" class="logo">Acquia Help Center</a>
    </div>
    <div class="col right">
      <ul class="main-nav">
        <li>
          <a href="https://www.acquia.com" title="Go to www.acquia.com for our latest information.">Acquia.com</a>
        </li>
        <li>
            <a href="https://dev.acquia.com" title="Acquia's Developer Center: developers.acquia.com">Developers</a>
        </li>
        <li>
            <a href="https://training.acquia.com" title="Go to training.acquia.com to find out about courses and certifications.">Training</a>
        </li>
        <li>
            <a href="/site-search" data-drupal-link-system-path="site-search">Search</a>
        </li>
      </ul>
    </div>
</div>
<div class="bottombar">
    <div class="searchbar-wrapper">
        <form action="search.html" method="get" class="searchbar">
            <div class="search-title">Need help finding something? <strong>Start Here.</strong></div>
            <div class="search-box">
                <input type="search" name="q" maxlength="128" size="15" value="" class="st-default-search-input">
                <input type="hidden" name="check_keywords" value="yes">
                <input type="hidden" name="area" value="default">
            </div>
            <div class="search-btn">
                <input class="btn-search button" type="submit" id="edit-submit-acquia-search" value="Search Docs">
            </div>
        </form>
    </div>
	</div>
</header>



    
<div class="breadcrumbs-wrapper">
	<ul>
        
        <li><a href="../../../index.html">Home</a></li>
        
        <li><a href="../../../lift.html" >Acquia Lift</a></li>
        <li><a href="../../contenthub.html" >Content Hub</a></li>
        <li><a href="../sharing.html" accesskey="U">Sharing content</a></li>
        <li class="current">Working with content dependencies</li>
	</ul>
</div>


<div class="row">
    
        
  <div class="small-4 large-3 columns" id="sidebar" data-sticky-container>
      <div class="sticky" data-sticky data-margin-top="0"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../acquia-cloud.html">Acquia Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../edge.html">Acquia Cloud Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../shield.html">Acquia Cloud Shield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../site-factory.html">Acquia Cloud Site Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../commerce.html">Acquia Commerce Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dam.html">Acquia DAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-desktop.html">Acquia Dev Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../journey.html">Acquia Journey</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../lift.html">Acquia Lift</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../release-notes.html">Acquia Lift Component Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../known-issues.html">Known Issues in Acquia Lift</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../exp-builder.html">Experience Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../profile-mgr.html">Profile Manager</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../contenthub.html">Content Hub</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../service-rns.html">Release notes - Content Hub service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client-rns.html">Release notes - Content Hub client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html">Installing Content Hub</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../sharing.html">Sharing content</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="blocks.html">Using blocks with Content Hub</a></li>
<li class="toctree-l4"><a class="reference internal" href="delete.html">Deleting content from subscribing sites</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Working with content dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="export.html">Exporting multiple entities at once</a></li>
<li class="toctree-l4"><a class="reference internal" href="import.html">Importing multiple entities at once</a></li>
<li class="toctree-l4"><a class="reference internal" href="reset.html">Resetting and reindexing entities by content type</a></li>
<li class="toctree-l4"><a class="reference internal" href="sync.html">Keeping content synchronized</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../discover.html">Discovering content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html">Modules to use with Content Hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html">Using the Content Hub API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html">Content Hub troubleshooting guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../best-practices.html">Best practices for developing with Content Hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cdf.html">Content Hub and CDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devel.html">Using Devel with Content Hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../drush.html">Using Drush with Content Hub for Drupal 7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../drush-d8.html">Using Drush with Content Hub for Drupal 8</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../arch.html">Acquia Lift architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Acquia Lift glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../omni.html">Data warehouse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../connectors.html">Using connectors with Acquia Lift</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api.html">Using the Acquia Lift APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">Acquia Platform APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../acquia-search.html">Acquia Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devtools.html">Developer tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../lightning.html">Lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../support.html">Acquia Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ra.html">Remote Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resource.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Acquia Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guide.html">Products and Services Guide</a></li>
</ul>

      </div>
  </div>
    
    <div id="content" class="small-8 large-9 columns">
        
            
  <div class="section" id="working-with-content-dependencies">
<h1>Working with content dependencies<a class="headerlink" href="#working-with-content-dependencies" title="Permalink to this headline">Â¶</a></h1>
<p>Drupal content can contain dependencies, such as node references, which
rely on other content. Content Hub is capable of exporting
content to the central hub, and including all of the dependent content.
This includes websites with complex, nested, highly interdependent
content.</p>
<p>When sharing content with Content Hub, be aware of what content
may be related to it. Each of those entities must also be examined for
content they are related to. However, with some complex data
relationships, the data may not have room to fit within the memory
footprint allowed by the server.</p>
<p>For example: your website may have content related to a particular
office. That office may have relationships with all of the members of
the office. Those members can have relationships with their workgroups,
which may have relationships with other offices.</p>
<p>If all of your content is related to each other, you can export your
entire website to Content Hub each time a piece of content is
updated. This changes a minor update into a potentially large set of
requests being sent to Content Hub, and has the potential to
cause serious performance issues for your website.</p>
<p>To prevent these types of occurrences, Content Hub takes
precautionary steps. Users can create their own queue using Drupalâs
<a class="reference external" href="https://api.drupal.org/api/drupal/modules%21system%21system.queue.inc/group/queue/7.x">Queue
operations</a>
system (or another queue system of your choice), and then
Content Hub can use that queue to help limit the amount of data
processed on both the subscriber and publisher websites.</p>
<table border="1" class="docutils" id="content-dependency-table">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Concept</th>
<th class="head">Definition</th>
<th class="head">Default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Depth</td>
<td>The number of
dependency levels
that will be checked</td>
<td>30</td>
</tr>
<tr class="row-odd"><td>Load</td>
<td>The number of
dependencies to load</td>
<td>500</td>
</tr>
<tr class="row-even"><td>Send/Receive</td>
<td>The number of
dependent entities
that will be
sent/received</td>
<td>500</td>
</tr>
</tbody>
</table>
<p>In Drupal 7, deferred entities are available to other modules for custom
processing by using the following hooks:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">hook_content_hub_webhook_get_unprocessed_entities()</span></code></li>
<li><code class="docutils literal"><span class="pre">hook_content_hub_connector_defer_entities()</span></code></li>
<li><code class="docutils literal"><span class="pre">hook_content_hub_connector_defer_entities_import()</span></code></li>
</ul>
<div class="section" id="setting-limits-for-export">
<h2>Setting limits for export<a class="headerlink" href="#setting-limits-for-export" title="Permalink to this headline">Â¶</a></h2>
<p>When preparing to publish content, Content Hub reviews both the
number of nodes and how many levels of referenced content will be sent.
This content is then processed, and any remaining content is sent to the
queue. Variable names are dependent on your Drupal version, and are
described as follows:</p>
<ul>
<li><div class="first line-block">
<div class="line"><em>Drupal 8</em></div>
<div class="line">Drupal 8 has a single parameter to limit exported dependencies. The
<code class="docutils literal"><span class="pre">dependency_depth</span></code> parameter limits the level of dependencies
that are evaluated, but does not limit the actual number of
exported items. This parameter can be also set by using Drush.</div>
</div>
<p><code class="docutils literal"><span class="pre">drush</span> <span class="pre">config-set</span> <span class="pre">acquia_contenthub.entity_config</span> <span class="pre">dependency_depth</span> <span class="pre">3</span></code></p>
<p>This example sets the value to <code class="docutils literal"><span class="pre">3</span></code> (which is the default), and
indicates that exporting collects entities on the first three level
of dependencies.</p>
</li>
<li><div class="first line-block">
<div class="line"><em>Drupal 7</em></div>
<div class="line">The following variables can be set for export:</div>
</div>
<ul class="simple">
<li>Depth - <code class="docutils literal"><span class="pre">content_hub_connector_max_dep_depth</span></code></li>
<li>Load - <code class="docutils literal"><span class="pre">content_hub_connector_max_dep_load</span></code></li>
<li>Send - <code class="docutils literal"><span class="pre">content_hub_connector_max_dep_send</span></code></li>
<li><code class="docutils literal"><span class="pre">cache_exported</span></code> - <code class="docutils literal"><span class="pre">FALSE</span></code> - When <code class="docutils literal"><span class="pre">TRUE</span></code>, this tracks which
items that have changed, and does not send unchanged items. This
feature is still under development.</li>
</ul>
<div class="line-block">
<div class="line">Based on the default values for these variables,
Content Hub will initially evaluate up to 30 levels of
dependent content, and then load and send up to 500 items to the
Hub.</div>
<div class="line">If Content Hub reaches the limits of what it can send, it
displays the following warning message:</div>
</div>
<p><code class="docutils literal"><span class="pre">Content</span> <span class="pre">dependency</span> <span class="pre">limits</span> <span class="pre">were</span> <span class="pre">reached.</span> <span class="pre">Not</span> <span class="pre">all</span> <span class="pre">dependencies</span> <span class="pre">were</span> <span class="pre">submitted</span> <span class="pre">to</span> <span class="pre">Content</span> <span class="pre">Hub.</span></code></p>
<p>A message will also be recorded in the status report (<strong>Reports &gt;
Status report</strong>), from <code class="docutils literal"><span class="pre">content_hub_connector</span></code>, which states how
many items were sent to the queue, and will look similar to the
following message:</p>
<p><code class="docutils literal"><span class="pre">entity</span> <span class="pre">limit</span> <span class="pre">enforced:</span> <span class="pre">X</span> <span class="pre">not</span> <span class="pre">charted,</span> <span class="pre">Y</span> <span class="pre">not</span> <span class="pre">loaded,</span> <span class="pre">Z</span> <span class="pre">not</span> <span class="pre">sent</span></code></p>
<div class="line-block">
<div class="line">where <code class="docutils literal"><span class="pre">X</span></code>, <code class="docutils literal"><span class="pre">Y</span></code>, and <code class="docutils literal"><span class="pre">Z</span></code> are the number of items not
processed.</div>
<div class="line">The queue will process during normal Drupal cron runs.</div>
</div>
</li>
</ul>
</div>
<div class="section" id="setting-limits-for-import">
<h2>Setting limits for import<a class="headerlink" href="#setting-limits-for-import" title="Permalink to this headline">Â¶</a></h2>
<p>When importing content from Content Hub, the amount of
discovered and imported content also faces limitations based on
dependency levels.</p>
<p>Variable names on the subscribing website:</p>
<ul class="simple">
<li>Load -
<code class="docutils literal"><span class="pre">content_hub_connector_max_entities_webhook_request</span></code></li>
<li>Depth - <code class="docutils literal"><span class="pre">content_hub_connector_max_dep_depth_import</span></code> -
limits how many levels of dependent content will be imported</li>
<li>Send/Receive - <code class="docutils literal"><span class="pre">content_hub_connector_max_dep_receive</span></code></li>
</ul>
<p>You can <a class="reference external" href="/content-hub/drush">use Drush</a> to check the import queue
variable values and status, which returns these items and their current
values:</p>
<ul class="simple">
<li>Load - <code class="docutils literal"><span class="pre">max</span> <span class="pre">dependencies</span></code></li>
<li>Depth - <code class="docutils literal"><span class="pre">max</span> <span class="pre">dependency</span> <span class="pre">gap</span></code></li>
<li>Send/Receive - <code class="docutils literal"><span class="pre">max</span> <span class="pre">items</span></code></li>
</ul>
</div>
<div class="section" id="queuing-for-publishing">
<h2>Queuing for publishing<a class="headerlink" href="#queuing-for-publishing" title="Permalink to this headline">Â¶</a></h2>
<p>Content Hub, by default, uses Drupalâs queueing system. When the
system detects that an update needs to be sent to the central hub, it
analyzes the number of changes that will be processed. It then sends the
first batch of content to the hub, and adds the remainder of the content
to the queue for processing. Normally this processing completes in under
five minutes.</p>
<p>If you have your own queuing solution, it is possible to use that
solution in place of what Content Hub provides.</p>
</div>
</div>


        
    </div>
</div>

    
<div class="row">
    <div class="small-4 large-3 columns"></div>
    <div id="relinks" class="small-8 large-9 columns">
        <div class="pagination-wrapper">
            <div class="prev">
                <a href="delete.html" title="Deleting content from subscribing sites"><b>â¹&nbsp;</b>Deleting content from subscribing sites</a>
            </div>
            
            <div class="next">
                <a href="export.html" title="Exporting multiple entities at once">Exporting multiple entities at once<b>&nbsp;âº</b></a>
            </div>
            
        </div>
    </div>
</div>



    
<div class="assistance-wrapper">
	<div class="assistance-tbl">
		<div class="col">
			<p><img src="/_static/phone.png" alt="Contact support">Still need assistance? <strong><a href="https://docs.acquia.com/support">Contact Acquia Support</a></strong></p>
		</div>
	</div>
</div>
<div class="support">
	<div class="support-tbl">
		<div class="col left">
			<h2><a href="https://www.acquia.com/customer-success/acquia-global-support">Support</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/support">Contact Support</a></li>
			</ul>
		</div>
		<div class="col middle">
			<h2><a href="https://www.acquia.com/about-us">About Acquia</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/about-us">About Us</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/leadership">Leadership</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/board">Board of Directors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/investors">Investors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/newsroom">Newsroom</a></li>
				<li><a class="light-link" href="https://www.acquia.com/careers">Careers</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/contact">Contact Us</a></li>
			</ul>
			<ul class="social-media">
				<li>
					<a class="fa fa-twitter fa-lg ext" href="https://twitter.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Twitter</span>
					</a>
				</li>
				<li>
					<a class="fa fa-facebook fa-lg ext" href="https://www.facebook.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Facebook</span>
					</a>
				</li>
				<li>
					<a class="fa fa-github-alt fa-lg ext" href="https://github.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Github</span>
					</a>
				</li>
				<li>
					<a class="fa fa-linkedin-in fa-lg ext" href="http://www.linkedin.com/company/167056" target="_blank" rel="nofollow">
						<span class="hide">LinkedIn</span>
					</a>
				</li>
				<li>
					<a class="fa fa-google-plus-g fa-lg ext" href="https://plus.google.com/+acquia" target="_blank" rel="nofollow">
						<span class="hide">Google+</span>
					</a>
				</li>
				<li>
					<a class="fa fa-play fa-lg ext" href="https://www.youtube.com/user/AcquiaTV" target="_blank" rel="nofollow">
						<span class="hide">YouTube</span>
					</a>
				</li>
				<li>
					<a class="fa fa-envelope fa-lg" href="https://www.acquia.com/about-us/contact">
						<span class="hide">Contact Us</span>
					</a>
				</li>
			</ul>
		</div>
		<div class="col right">
			<div class="centered">
				<p>
					<img alt="Acquia: Think Ahead" src="/_static/acquia-logo-think-ahead-black-small.svg">
				</p>
				<p class="margin-left-half">
					<span>53 State Street, 10th Floor<br>
					Boston, MA 02109<br>
					United States<br>
					Phone: 888-922-7842</span><br>
					Map: <a class="decorate ext" href="http://maps.google.com/?q=42.358429+-71.056184+%2853+State+Street%2C+10th+Floor%2C+Boston%2C+MA%2C+02109%2C+us%29" target="_blank" rel="nofollow">Google Maps<span class="ext"><span class="element-invisible"> </span></span></a><br><a class="decorate" href="https://www.acquia.com/about-us/contact#block-views-locations-block-1">View other locations</a>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="top-bar row column">
	<div class="footer" role="contentinfo">Copyright &copy 2018 Acquia Inc. All Rights Reserved. </br>Drupal is a registered trademark of <a href="https://dri.es/">Dries Buytaert</a>. All product names, logos, and brands are property of their respective owners.
    </div>
</div>
    </div>

    <script> $(document).foundation() </script>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','2_Wi1aQvEeu61haxG8TX','2.0.0');
    </script>

  </body>
</html>