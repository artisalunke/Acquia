
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Profiles API and HMAC v1 authorization &#8212; Acquia Help Center</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/foundation-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/what-input/what-input.min.js"></script>
    <script type="text/javascript" src="../../_static/foundation-sites/foundation.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Profiles API and HMAC authorization" href="hmac-intro.html" />
    <link rel="prev" title="Using the Acquia Lift APIs" href="../api.html" /> 
  </head>
  <body>

    
<header>
<div class="topbar">
    <div class="col left">
        <a href="/" title="Acquia Help Center Home" class="logo">Acquia Help Center</a>
    </div>
    <div class="col right">
      <ul class="main-nav">
        <li>
          <a href="https://www.acquia.com" title="Go to www.acquia.com for our latest information.">Acquia.com</a>
        </li>
        <li>
            <a href="https://dev.acquia.com" title="Acquia's Developer Center: developers.acquia.com">Developers</a>
        </li>
        <li>
            <a href="https://training.acquia.com" title="Go to training.acquia.com to find out about courses and certifications.">Training</a>
        </li>
        <li>
            <a href="/site-search" data-drupal-link-system-path="site-search">Search</a>
        </li>
      </ul>
    </div>
</div>
<div class="bottombar">
    <div class="searchbar-wrapper">
        <form action="search.html" method="get" class="searchbar">
            <div class="search-title">Need help finding something? <strong>Start Here.</strong></div>
            <div class="search-box">
                <input type="search" name="q" maxlength="128" size="15" value="" class="st-default-search-input">
                <input type="hidden" name="check_keywords" value="yes">
                <input type="hidden" name="area" value="default">
            </div>
            <div class="search-btn">
                <input class="btn-search button" type="submit" id="edit-submit-acquia-search" value="Search Docs">
            </div>
        </form>
    </div>
	</div>
</header>



    
<div class="breadcrumbs-wrapper">
	<ul>
        
        <li><a href="../../index.html">Home</a></li>
        
        <li><a href="../../lift.html" >Acquia Lift</a></li>
        <li><a href="../api.html" accesskey="U">Using the Acquia Lift APIs</a></li>
        <li class="current">Profiles API and HMAC v1 authorization</li>
	</ul>
</div>


<div class="row">
    
        
  <div class="small-4 large-3 columns" id="sidebar" data-sticky-container>
      <div class="sticky" data-sticky data-margin-top="0"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../acquia-cloud.html">Acquia Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../edge.html">Acquia Cloud Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../shield.html">Acquia Cloud Shield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../site-factory.html">Acquia Cloud Site Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commerce.html">Acquia Commerce Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dam.html">Acquia DAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-desktop.html">Acquia Dev Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../journey.html">Acquia Journey</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../lift.html">Acquia Lift</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html">Acquia Lift Component Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../known-issues.html">Known Issues in Acquia Lift</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exp-builder.html">Experience Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../profile-mgr.html">Profile Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contenthub.html">Content Hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../arch.html">Acquia Lift architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Acquia Lift glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../omni.html">Data warehouse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connectors.html">Using connectors with Acquia Lift</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html">Using the Acquia Lift APIs</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Profiles API and HMAC v1 authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="hmac-intro.html">Profiles API and HMAC authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="hmacv2.html">Profiles API and HMAC v2 authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="import.html">Acquia Lift File Import API reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="javascript.html">Acquia Lift JavaScript API reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="push.html">Acquia Lift Push API reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">Acquia Platform APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../acquia-search.html">Acquia Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Developer tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lightning.html">Lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Acquia Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ra.html">Remote Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resource.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">Acquia Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide.html">Products and Services Guide</a></li>
</ul>

      </div>
  </div>
    
    <div id="content" class="small-8 large-9 columns">
        
            
  <div class="section" id="acquia-product-liftapi-and-hmac-v1-authorization">
<h1>Profiles API and HMAC v1 authorization<a class="headerlink" href="#acquia-product-liftapi-and-hmac-v1-authorization" title="Permalink to this headline">¶</a></h1>
<p>Based on Acquia Lift Web account configuration, API calls may
require authentication in the form of a
<a class="reference external" href="https://en.wikipedia.org/wiki/Hash-based_message_authentication_code">HMAC-SHA1</a>
message hash as a header within the request. HMAC is a keyed-hash
authentication code that calculates a message authentication code (MAC)
involving a cryptographic hash function in combination with a secret
cryptographic key. SHA1 is one type of cryptographic hash function used
in the calculation of an HMAC header; the resulting algorithm is known
as HMAC-SHA1.</p>
<p>This authentication scheme protects your data and ensures your secret
keys stay secure, and utilizes the Access Key ID and secret access key
associated with your Acquia Lift Web subscription.</p>
<div class="section" id="setting-hmac-authentication-as-an-http-request">
<h2>Setting HMAC authentication as an HTTP request<a class="headerlink" href="#setting-hmac-authentication-as-an-http-request" title="Permalink to this headline">¶</a></h2>
<p>In the Profiles API, HMAC authentication is set as a header
in an HTTP request in the following form:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>AUTHORIZATION:HMAC [key_ID]:[sig]
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">[key_ID]</span></code> is the access key assigned to your
Acquia Lift Web account subscription (for example,
<code class="docutils literal"><span class="pre">asdf23874hfewahJKHJHa</span></code>), and <code class="docutils literal"><span class="pre">[sig]</span></code> is the HMAC-SHA1 hash of
<a class="reference external" href="#generating">canonical representation</a> using the secret access key
associated with your Acquia Lift Web account subscription (for
example, <code class="docutils literal"><span class="pre">sdkjfhz[9389PPKJEU</span></code>).</p>
<div class="section" id="generating-the-canonical-representation-of-the-request">
<h3>Generating the canonical representation of the request<a class="headerlink" href="#generating-the-canonical-representation-of-the-request" title="Permalink to this headline">¶</a></h3>
<p>Before you can <a class="reference external" href="#creating">calculate the authorization header</a> to
authenticate your API call, you first need to generate the canonical
representation of the request. To do so, start with the empty string
(“”), and then use the following guidelines:</p>
<ul class="simple">
<li>Add the HTTP verb for the request (for example, <code class="docutils literal"><span class="pre">GET</span></code> or <code class="docutils literal"><span class="pre">POST</span></code>)
in capital letters, followed by a single newline (<code class="docutils literal"><span class="pre">U+000A</span></code>).</li>
<li>Convert specific header names to lowercase. Currently supported
headers are:<ul>
<li><code class="docutils literal"><span class="pre">accept</span></code></li>
<li><code class="docutils literal"><span class="pre">host</span></code> (domain name only, no protocol)</li>
<li><code class="docutils literal"><span class="pre">user-agent</span></code></li>
</ul>
</li>
<li>Sort the headers lexicographically by header name.</li>
<li>Trim header values by removing any whitespace.</li>
<li>Combine lowercase header names and header values using a single colon
as the separator. Do not include whitespace characters around the
separator.</li>
<li>Combine the specific headers using a single newline character
(<code class="docutils literal"><span class="pre">U+000A</span></code>) as the separator and append them to the canonical
representation, followed by a single newline character (<code class="docutils literal"><span class="pre">U+000A</span></code>).</li>
<li>Append the request URI (the part of this request’s URL from the
protocol name up to the query string) to the canonical
representation.</li>
<li>Sort all parameters lexicographically (alphabetically) by parameter
name, and then join them using a single ampersand as the separator.</li>
<li>Append the parameter string using a single question mark as the
separator, unless the query string is empty.</li>
</ul>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>You are an Acquia Lift Web and Omnichannel customer whose
account ID is EXAMPLEINC, is provisioned in one of the supported
geographic regions, and your Profiles API requires
authentication. You have an Acquia Lift Web user who wants to
retrieve a list of defined segments, and has an Access Key of ABCD and a
secret access key of 1234.</p>
<p>The following table describes the process used to handle this example,
along with how it can be executed:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Step</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Start with an empty string, and then add the capitalized HTTP verb for the request followed by a single newline.</td>
<td><code class="docutils literal"><span class="pre">GET</span></code></td>
</tr>
<tr class="row-odd"><td>Convert the header names to lowercase, sort them by header name, and then trim any whitespace. Combine the header names and values with a colon separator.</td>
<td><div class="first last highlight-none"><div class="highlight"><pre><span></span>host:example-liftapi.lift.acquia.com
user-agent:Apache-HttpClient/4.3.5 (java 1.5)
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td>Combine the specific headers using a single newline character and then append them to the canonical representation, followed by a single newline.</td>
<td><div class="first last highlight-none"><div class="highlight"><pre><span></span>GET
host:example-liftapi.lift.acquia.com
user-agent: Apache-HttpClient/4.3.5 (java 1.5)
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Append the request URI (the part of this request’s URL from the protocol name up to the query string) to the canonical representation.</td>
<td><div class="first last highlight-none"><div class="highlight"><pre><span></span>GET
host:example-liftapi.lift.acquia.com
user-agent:Apache-HttpClient/4.3.5 (java 1.5)
/dashboard/rest/EXAMPLEINC/segments
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td>Sort all parameters by parameter name, and then join them using a single ampersand as the separator.</td>
<td>This example does not require parameters, but if it required parama with a value of 1 and paramb with a value of 2, the sorting and joining result would be: <code class="docutils literal"><span class="pre">parama=1¶mb=2</span></code></td>
</tr>
<tr class="row-odd"><td>Unless the query string is empty, append the parameter string, using a single question mark as the separator.</td>
<td>This example does not require parameters, but if it did, the resulting request URI would be: <code class="docutils literal"><span class="pre">/dashboard/rest/EXAMPLEINC/segments?parama=1¶mb=2</span></code></td>
</tr>
</tbody>
</table>
<p>The full canonical representation is:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>GET host:example-liftapi.lift.acquia.com
user-agent: Apache-HttpClient/4.3.5 (java 1.5) /dashboard/rest/EXAMPLEINC/segments
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-the-authorization-header">
<h3>Creating the authorization header<a class="headerlink" href="#creating-the-authorization-header" title="Permalink to this headline">¶</a></h3>
<p>After you have <a class="reference external" href="#generating">generated the canonical request</a>, you
can create the authorization header. Using the canonical request, you
can calculate the HMAC header value. If your Acquia Lift Web Access
Key ID is ABCD and the secret access key is 1234, the HMAC header value
is <code class="docutils literal"><span class="pre">cvynYFi7SdCWu6KKt+wImfcY17k=</span></code>.</p>
<p>The full HTTP request is:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>GET /dashboard/rest/EXAMPLEINC/segments HTTP/1.1 Host: example-liftapi.lift.acquia.com
Connection: Keep-Alive User-Agent: Apache-HttpClient/4.3.5 (java 1.5)
Authorization: HMAC ABCD:cvynYFi7SdCWu6KKt+wImfcY17k=
</pre></div>
</div>
<div class="section" id="response-validation">
<h4>Response validation<a class="headerlink" href="#response-validation" title="Permalink to this headline">¶</a></h4>
<p>Requests using the GET method will return a response with a
<code class="docutils literal"><span class="pre">Content-MD5</span></code> header. This header is the MD5 hash of the response
content and can be used for response content validation.</p>
</div>
</div>
</div>
<div class="section" id="managing-hmac-authentication-in-acquia-product-alw">
<h2>Managing HMAC authentication in Acquia Lift Web<a class="headerlink" href="#managing-hmac-authentication-in-acquia-product-alw" title="Permalink to this headline">¶</a></h2>
<p>Although HMAC is enabled by default, it can be disabled for
troubleshooting. To either enable or disable HMAC authentication,
complete the following steps:</p>
<ol class="arabic simple">
<li>Click the <strong>Admin</strong> menu.</li>
<li>In the <strong>System</strong> menu, click <strong>Manage customers</strong>.</li>
<li>In <strong>Account ID</strong>, click your ID.</li>
<li>In the <strong>API Authentication</strong> settings, depending on the API call
that you are using, select or clear the appropriate check boxes to
either enable or disable your HMAC authentication settings:<ul>
<li><strong>Enable Segment REST Api HMAC Authentication</strong> - Controls HMAC
authentication for segment calls in the Profiles API</li>
<li><strong>Enable Event Import REST Api HMAC Authentication</strong> - Controls
HMAC authentication for event imports in the
Profiles API</li>
<li><strong>Enable File Export REST Api HMAC Authentication</strong> - Controls
HMAC authentication for file exports in the
Profiles API</li>
<li><strong>Enable Visitor Query REST Api HMAC Authentication</strong> - Controls
HMAC authentication for visitor queries in the
Profiles API</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="code-examples">
<h2>Code examples<a class="headerlink" href="#code-examples" title="Permalink to this headline">¶</a></h2>
<p>We have developed several code examines that you can use to help you
understand how to make calls to the <a class="reference external" href="/lift/omni/rest_api">Profiles API</a> using different
programming languages:</p>
<ul class="simple">
<li><a class="reference external" href="https://gist.github.com/acquialibrary/d0d26d68f7e3c5531d22/download">PHP code
example</a>
- Makes a call to the Acquia Lift Web REST API based on the
parameters you’ve provided it. <code class="docutils literal"><span class="pre">getMakeAPICall</span></code> is the entry point
of the example.</li>
<li><a class="reference external" href="https://gist.github.com/acquialibrary/22450e13a49fa094542f/download">Java code
example</a>
- Makes a call to several simple Acquia Lift REST APIs. The
entry point of the example is the <code class="docutils literal"><span class="pre">main</span></code> method.</li>
</ul>
</div>
</div>


        
    </div>
</div>

    
<div class="row">
    <div class="small-4 large-3 columns"></div>
    <div id="relinks" class="small-8 large-9 columns">
        <div class="pagination-wrapper">
            <div class="prev">
                <a href="../api.html" title="Using the Acquia Lift APIs"><b>‹&nbsp;</b>Using the Acquia Lift APIs</a>
            </div>
            
            <div class="next">
                <a href="hmac-intro.html" title="Profiles API and HMAC authorization">Profiles API and HMAC authorization<b>&nbsp;›</b></a>
            </div>
            
        </div>
    </div>
</div>



    
<div class="assistance-wrapper">
	<div class="assistance-tbl">
		<div class="col">
			<p><img src="/_static/phone.png" alt="Contact support">Still need assistance? <strong><a href="https://docs.acquia.com/support">Contact Acquia Support</a></strong></p>
		</div>
	</div>
</div>
<div class="support">
	<div class="support-tbl">
		<div class="col left">
			<h2><a href="https://www.acquia.com/customer-success/acquia-global-support">Support</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/support">Contact Support</a></li>
			</ul>
		</div>
		<div class="col middle">
			<h2><a href="https://www.acquia.com/about-us">About Acquia</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/about-us">About Us</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/leadership">Leadership</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/board">Board of Directors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/investors">Investors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/newsroom">Newsroom</a></li>
				<li><a class="light-link" href="https://www.acquia.com/careers">Careers</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/contact">Contact Us</a></li>
			</ul>
			<ul class="social-media">
				<li>
					<a class="fa fa-twitter fa-lg ext" href="https://twitter.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Twitter</span>
					</a>
				</li>
				<li>
					<a class="fa fa-facebook fa-lg ext" href="https://www.facebook.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Facebook</span>
					</a>
				</li>
				<li>
					<a class="fa fa-github-alt fa-lg ext" href="https://github.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Github</span>
					</a>
				</li>
				<li>
					<a class="fa fa-linkedin-in fa-lg ext" href="http://www.linkedin.com/company/167056" target="_blank" rel="nofollow">
						<span class="hide">LinkedIn</span>
					</a>
				</li>
				<li>
					<a class="fa fa-google-plus-g fa-lg ext" href="https://plus.google.com/+acquia" target="_blank" rel="nofollow">
						<span class="hide">Google+</span>
					</a>
				</li>
				<li>
					<a class="fa fa-play fa-lg ext" href="https://www.youtube.com/user/AcquiaTV" target="_blank" rel="nofollow">
						<span class="hide">YouTube</span>
					</a>
				</li>
				<li>
					<a class="fa fa-envelope fa-lg" href="https://www.acquia.com/about-us/contact">
						<span class="hide">Contact Us</span>
					</a>
				</li>
			</ul>
		</div>
		<div class="col right">
			<div class="centered">
				<p>
					<img alt="Acquia: Think Ahead" src="/_static/acquia-logo-think-ahead-black-small.svg">
				</p>
				<p class="margin-left-half">
					<span>53 State Street, 10th Floor<br>
					Boston, MA 02109<br>
					United States<br>
					Phone: 888-922-7842</span><br>
					Map: <a class="decorate ext" href="http://maps.google.com/?q=42.358429+-71.056184+%2853+State+Street%2C+10th+Floor%2C+Boston%2C+MA%2C+02109%2C+us%29" target="_blank" rel="nofollow">Google Maps<span class="ext"><span class="element-invisible"> </span></span></a><br><a class="decorate" href="https://www.acquia.com/about-us/contact#block-views-locations-block-1">View other locations</a>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="top-bar row column">
	<div class="footer" role="contentinfo">Copyright &copy 2018 Acquia Inc. All Rights Reserved. </br>Drupal is a registered trademark of <a href="https://dri.es/">Dries Buytaert</a>. All product names, logos, and brands are property of their respective owners.
    </div>
</div>
    </div>

    <script> $(document).foundation() </script>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','2_Wi1aQvEeu61haxG8TX','2.0.0');
    </script>

  </body>
</html>