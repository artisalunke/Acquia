
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>About UTF-8 support in Drupal 7 &#8212; Acquia Help Center</title>
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/foundation-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/what-input/what-input.min.js"></script>
    <script type="text/javascript" src="../../../_static/foundation-sites/foundation.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Managing domains" href="../domains.html" />
    <link rel="prev" title="Tools for administering your database" href="tools.html" /> 
  </head>
  <body>

    
<header>
<div class="topbar">
    <div class="col left">
        <a href="/" title="Acquia Help Center Home" class="logo">Acquia Help Center</a>
    </div>
    <div class="col right">
      <ul class="main-nav">
        <li>
          <a href="https://www.acquia.com" title="Go to www.acquia.com for our latest information.">Acquia.com</a>
        </li>
        <li>
            <a href="https://dev.acquia.com" title="Acquia's Developer Center: developers.acquia.com">Developers</a>
        </li>
        <li>
            <a href="https://training.acquia.com" title="Go to training.acquia.com to find out about courses and certifications.">Training</a>
        </li>
        <li>
            <a href="/site-search" data-drupal-link-system-path="site-search">Search</a>
        </li>
      </ul>
    </div>
</div>
<div class="bottombar">
    <div class="searchbar-wrapper">
        <form action="search.html" method="get" class="searchbar">
            <div class="search-title">Need help finding something? <strong>Start Here.</strong></div>
            <div class="search-box">
                <input type="search" name="q" maxlength="128" size="15" value="" class="st-default-search-input">
                <input type="hidden" name="check_keywords" value="yes">
                <input type="hidden" name="area" value="default">
            </div>
            <div class="search-btn">
                <input class="btn-search button" type="submit" id="edit-submit-acquia-search" value="Search Docs">
            </div>
        </form>
    </div>
	</div>
</header>



    
<div class="breadcrumbs-wrapper">
	<ul>
        
        <li><a href="../../../index.html">Home</a></li>
        
        <li><a href="../../../acquia-cloud.html" >Acquia Cloud</a></li>
        <li><a href="../../manage.html" >Managing applications with Acquia Cloud</a></li>
        <li><a href="../database.html" accesskey="U">Working with databases</a></li>
        <li class="current">About UTF-8 support in Drupal 7</li>
	</ul>
</div>


<div class="row">
    
        
  <div class="small-4 large-3 columns" id="sidebar" data-sticky-container>
      <div class="sticky" data-sticky data-margin-top="0"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../acquia-cloud.html">Acquia Cloud</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../free.html">Getting started with Acquia Cloud Free</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloud-ui.html">Using the Acquia Cloud interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch.html">Acquia Cloud architecture and key concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ready.html">Acquia Cloud onboarding guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../create.html">Creating a new application on Acquia Cloud</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../manage.html">Managing applications with Acquia Cloud</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../antivirus.html">Enabling virus scanning for file uploads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../applications.html">Managing applications with the Acquia Cloud interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../back-up.html">Backing up your application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configure.html">Configuring an environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cron.html">Using scheduled jobs to maintain your application</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../database.html">Working with databases</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cli.html">Accessing your database from the command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="dbobjects.html">Problems using MySQL stored procedures, triggers, and functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="tools.html">Tools for administering your database</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">About UTF-8 support in Drupal 7</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../domains.html">Managing domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../email.html">About email in Acquia Cloud applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environments.html">Working with environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../export.html">Exporting an application from Acquia Cloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="../files.html">Working with files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../htaccess.html">Redirecting visitor requests with the .htaccess file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipv6.html">Using IPv6 IP addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../more-envs.html">Additional environments for Acquia Cloud Enterprise</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiregion.html">Using multi-region failover</a></li>
<li class="toctree-l3"><a class="reference internal" href="../notify.html">Viewing activity notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../php.html">Configuring PHP settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../prod-mode.html">Using Production mode to protect your live application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reset.html">Starting over with an Acquia Cloud subscription</a></li>
<li class="toctree-l3"><a class="reference internal" href="../servers.html">Managing Acquia Cloud servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sftp.html">Connecting to Acquia Cloud with an FTP client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ssh.html">Managing applications using the command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uptime.html">Monitoring uptime for your application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../variables.html">Using environment variables with Node.js applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../monitor.html">Monitoring your applications and infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../access.html">Controlling access to Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../insight.html">Acquia Insight</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../develop.html">Developing applications on Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../node-js.html">Node.js and Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../container.html">Containers in Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../performance.html">Improving application performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subs.html">Managing subscriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cd.html">Acquia Cloud CD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Acquia Cloud glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../known-issues.html">Known issues in Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../release-notes.html">Release notes - Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../self-service-scaling.html">Using a Cloud Service Management plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ssl.html">Enabling SSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../teams.html">Managing users, teams, roles, and permissions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../edge.html">Acquia Cloud Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../shield.html">Acquia Cloud Shield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../site-factory.html">Acquia Cloud Site Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../commerce.html">Acquia Commerce Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dam.html">Acquia DAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-desktop.html">Acquia Dev Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../journey.html">Acquia Journey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../lift.html">Acquia Lift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">Acquia Platform APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../acquia-search.html">Acquia Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devtools.html">Developer tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../lightning.html">Lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../support.html">Acquia Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ra.html">Remote Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resource.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Acquia Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guide.html">Products and Services Guide</a></li>
</ul>

      </div>
  </div>
    
    <div id="content" class="small-8 large-9 columns">
        
            
  <div class="section" id="about-utf-8-support-in-drupal-7">
<h1>About UTF-8 support in Drupal 7<a class="headerlink" href="#about-utf-8-support-in-drupal-7" title="Permalink to this headline">¶</a></h1>
<p>As of <a class="reference external" href="https://www.drupal.org/node/2488180">version 7.50</a>, Drupal
supports the use of multibyte UTF-8 characters. For reference,
Acquia Cloud and previous Drupal versions supported some versions
of UTF8, and Drupal 8 supports
<a class="reference external" href="https://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html">utf8mb4</a>
by default.</p>
<p>To ensure that your Acquia-hosted Drupal 7 website can use UTF-8,
complete the following steps:</p>
<ul>
<li><div class="first"><div id="database"></div><div class="line-block">
<div class="line">Examine your database connections.</div>
<div class="line">Acquia has already taken care of the basic server requirements for
utf8mb4, namely the <code class="docutils literal"><span class="pre">innodb_large_prefix</span></code>,
<code class="docutils literal"><span class="pre">innodb_file_format</span></code>, and <code class="docutils literal"><span class="pre">innodb_file_per_table</span></code>
configurations described in the <a class="reference external" href="https://www.drupal.org/node/2754539">Drupal.org
documentation</a>.</div>
</div>
</div></li>
<li><div class="first"><div id="connection"></div><div class="line-block">
<div class="line">Alter your database connection settings.</div>
<div class="line">A variation on the normally-recommended database connection code in
the <code class="docutils literal"><span class="pre">settings.php</span></code> file is required to ensure that the database’s
charset and collation are appropriate for utf8mb4 content.</div>
<div class="line">Add the following code in place of our <a class="reference external" href="/acquia-cloud/manage/database#use">regular include
statement</a>, ensuing that you
edit the website and database names to match your own environment
(for more information, see <a class="reference external" href="/acquia-cloud/manage/database#use">Working with
databases</a>):</div>
</div>
<p><code class="docutils literal"><span class="pre">//</span> <span class="pre">Note</span> <span class="pre">that</span> <span class="pre">SITE_NAME</span> <span class="pre">and</span> <span class="pre">DATABASE_NAME</span> <span class="pre">should</span> <span class="pre">be</span> <span class="pre">replaced</span> <span class="pre">accordingly</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">following</span> <span class="pre">code:</span> <span class="pre">if</span> <span class="pre">(file_exists('/var/www/site-php'))</span> <span class="pre">{</span>&#160;&#160; <span class="pre">//</span> <span class="pre">Delay</span> <span class="pre">the</span> <span class="pre">initial</span> <span class="pre">database</span> <span class="pre">connection.</span>&#160;&#160; <span class="pre">$conf['acquia_hosting_settings_autoconnect']</span> <span class="pre">=</span> <span class="pre">FALSE;</span>&#160;&#160; <span class="pre">//</span> <span class="pre">The</span> <span class="pre">standard</span> <span class="pre">require</span> <span class="pre">line</span> <span class="pre">goes</span> <span class="pre">here.</span>&#160;&#160; <span class="pre">require('/var/www/site-php/[DATABASE_NAME]/[DATABASE_NAME]-settings.inc');</span>&#160;&#160; <span class="pre">//</span> <span class="pre">Alter</span> <span class="pre">the</span> <span class="pre">charset</span> <span class="pre">and</span> <span class="pre">collation</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">databases.</span>&#160;&#160; <span class="pre">$databases['default']['default']['charset']</span> <span class="pre">=</span> <span class="pre">'utf8mb4';</span>&#160;&#160; <span class="pre">$databases['default']['default']['collation']</span> <span class="pre">=</span> <span class="pre">'utf8mb4_general_ci';</span>&#160;&#160; <span class="pre">$databases['[DATABASE_NAME]']['default']['charset']</span> <span class="pre">=</span> <span class="pre">'utf8mb4';</span>&#160;&#160; <span class="pre">$databases['[DATABASE_NAME]']['default']['collation']</span> <span class="pre">=</span> <span class="pre">'utf8mb4_general_ci';</span>&#160;&#160; <span class="pre">//</span> <span class="pre">Now</span> <span class="pre">connect</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">default</span> <span class="pre">database.</span>&#160;&#160; <span class="pre">acquia_hosting_db_choose_active();</span> <span class="pre">}</span></code></p>
</div></li>
<li><p class="first">If your website was upgraded from a version of Drupal before version
7.5, the charset and collation for database tables are most likely
not appropriate for utf8mb4. In this case, you must manually alter
the tables, or instead use a tool such as <a class="reference external" href="https://www.drupal.org/project/utf8mb4_convert">utf8mb4
Convert</a>.</p>
<p>Important</p>
<p>During this activity we recommend that you first create a complete
backup of your database(s), and then rehearse this step on
non-production environments and ensure that production sites are set
to maintenance mode.</p>
</li>
<li><div class="first line-block">
<div class="line">Ensure that your database backups will accept these characters.</div>
<div class="line">The <code class="docutils literal"><span class="pre">mysqldump</span></code> command, used for creating database backups and
copies, can use configuration overrides beyond those provided by
Acquia Cloud. These overrides are made in a file called
<code class="docutils literal"><span class="pre">~/.my.cnf</span></code> that you can create on the servers for one or more
environments.</div>
<div class="line">The contents of the <code class="docutils literal"><span class="pre">~/.my.cnf</span></code> file should be as follows:</div>
</div>
<p>Note</p>
<p>This file will apply to all websites in your environment. If you are
using multisites and have not yet completed converting all of your
websites to utf8mb4, there may be unpredictable results.</p>
<p><code class="docutils literal"><span class="pre">[client]</span> <span class="pre">loose-default-character-set</span> <span class="pre">=</span> <span class="pre">utf8mb4</span>&#160; <span class="pre">[mysqldump]</span> <span class="pre">default-character-set=utf8mb4</span></code></p>
<p>This file can be created in non-production environments for testing,
prior to its creation in the home directory of your production
environment.</p>
</li>
</ul>
</div>


        
    </div>
</div>

    
<div class="row">
    <div class="small-4 large-3 columns"></div>
    <div id="relinks" class="small-8 large-9 columns">
        <div class="pagination-wrapper">
            <div class="prev">
                <a href="tools.html" title="Tools for administering your database"><b>‹&nbsp;</b>Tools for administering your database</a>
            </div>
            
            <div class="next">
                <a href="../domains.html" title="Managing domains">Managing domains<b>&nbsp;›</b></a>
            </div>
            
        </div>
    </div>
</div>



    
<div class="assistance-wrapper">
	<div class="assistance-tbl">
		<div class="col">
			<p><img src="/_static/phone.png" alt="Contact support">Still need assistance? <strong><a href="https://docs.acquia.com/support">Contact Acquia Support</a></strong></p>
		</div>
	</div>
</div>
<div class="support">
	<div class="support-tbl">
		<div class="col left">
			<h2><a href="https://www.acquia.com/customer-success/acquia-global-support">Support</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/support">Contact Support</a></li>
			</ul>
		</div>
		<div class="col middle">
			<h2><a href="https://www.acquia.com/about-us">About Acquia</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/about-us">About Us</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/leadership">Leadership</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/board">Board of Directors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/investors">Investors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/newsroom">Newsroom</a></li>
				<li><a class="light-link" href="https://www.acquia.com/careers">Careers</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/contact">Contact Us</a></li>
			</ul>
			<ul class="social-media">
				<li>
					<a class="fa fa-twitter fa-lg ext" href="https://twitter.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Twitter</span>
					</a>
				</li>
				<li>
					<a class="fa fa-facebook fa-lg ext" href="https://www.facebook.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Facebook</span>
					</a>
				</li>
				<li>
					<a class="fa fa-github-alt fa-lg ext" href="https://github.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Github</span>
					</a>
				</li>
				<li>
					<a class="fa fa-linkedin-in fa-lg ext" href="http://www.linkedin.com/company/167056" target="_blank" rel="nofollow">
						<span class="hide">LinkedIn</span>
					</a>
				</li>
				<li>
					<a class="fa fa-google-plus-g fa-lg ext" href="https://plus.google.com/+acquia" target="_blank" rel="nofollow">
						<span class="hide">Google+</span>
					</a>
				</li>
				<li>
					<a class="fa fa-play fa-lg ext" href="https://www.youtube.com/user/AcquiaTV" target="_blank" rel="nofollow">
						<span class="hide">YouTube</span>
					</a>
				</li>
				<li>
					<a class="fa fa-envelope fa-lg" href="https://www.acquia.com/about-us/contact">
						<span class="hide">Contact Us</span>
					</a>
				</li>
			</ul>
		</div>
		<div class="col right">
			<div class="centered">
				<p>
					<img alt="Acquia: Think Ahead" src="/_static/acquia-logo-think-ahead-black-small.svg">
				</p>
				<p class="margin-left-half">
					<span>53 State Street, 10th Floor<br>
					Boston, MA 02109<br>
					United States<br>
					Phone: 888-922-7842</span><br>
					Map: <a class="decorate ext" href="http://maps.google.com/?q=42.358429+-71.056184+%2853+State+Street%2C+10th+Floor%2C+Boston%2C+MA%2C+02109%2C+us%29" target="_blank" rel="nofollow">Google Maps<span class="ext"><span class="element-invisible"> </span></span></a><br><a class="decorate" href="https://www.acquia.com/about-us/contact#block-views-locations-block-1">View other locations</a>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="top-bar row column">
	<div class="footer" role="contentinfo">Copyright &copy 2018 Acquia Inc. All Rights Reserved. </br>Drupal is a registered trademark of <a href="https://dri.es/">Dries Buytaert</a>. All product names, logos, and brands are property of their respective owners.
    </div>
</div>
    </div>

    <script> $(document).foundation() </script>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','2_Wi1aQvEeu61haxG8TX','2.0.0');
    </script>

  </body>
</html>