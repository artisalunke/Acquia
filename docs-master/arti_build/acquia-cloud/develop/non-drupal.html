
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Adding non-Drupal PHP extensions or libraries to your application &#8212; Acquia Help Center</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/foundation-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/what-input/what-input.min.js"></script>
    <script type="text/javascript" src="../../_static/foundation-sites/foundation.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using pipelines for site development and testing" href="pipelines.html" />
    <link rel="prev" title="Stopping non-production environments from sending module update alerts" href="module-update-alerts.html" /> 
  </head>
  <body>

    
<header>
<div class="topbar">
    <div class="col left">
        <a href="/" title="Acquia Help Center Home" class="logo">Acquia Help Center</a>
    </div>
    <div class="col right">
      <ul class="main-nav">
        <li>
          <a href="https://www.acquia.com" title="Go to www.acquia.com for our latest information.">Acquia.com</a>
        </li>
        <li>
            <a href="https://dev.acquia.com" title="Acquia's Developer Center: developers.acquia.com">Developers</a>
        </li>
        <li>
            <a href="https://training.acquia.com" title="Go to training.acquia.com to find out about courses and certifications.">Training</a>
        </li>
        <li>
            <a href="/site-search" data-drupal-link-system-path="site-search">Search</a>
        </li>
      </ul>
    </div>
</div>
<div class="bottombar">
    <div class="searchbar-wrapper">
        <form action="search.html" method="get" class="searchbar">
            <div class="search-title">Need help finding something? <strong>Start Here.</strong></div>
            <div class="search-box">
                <input type="search" name="q" maxlength="128" size="15" value="" class="st-default-search-input">
                <input type="hidden" name="check_keywords" value="yes">
                <input type="hidden" name="area" value="default">
            </div>
            <div class="search-btn">
                <input class="btn-search button" type="submit" id="edit-submit-acquia-search" value="Search Docs">
            </div>
        </form>
    </div>
	</div>
</header>



    
<div class="breadcrumbs-wrapper">
	<ul>
        
        <li><a href="../../index.html">Home</a></li>
        
        <li><a href="../../acquia-cloud.html" >Acquia Cloud</a></li>
        <li><a href="../develop.html" accesskey="U">Developing applications on Acquia Cloud</a></li>
        <li class="current">Adding non-Drupal PHP extensions or libraries to your application</li>
	</ul>
</div>


<div class="row">
    
        
  <div class="small-4 large-3 columns" id="sidebar" data-sticky-container>
      <div class="sticky" data-sticky data-margin-top="0"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../acquia-cloud.html">Acquia Cloud</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../free.html">Getting started with Acquia Cloud Free</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cloud-ui.html">Using the Acquia Cloud interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../arch.html">Acquia Cloud architecture and key concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ready.html">Acquia Cloud onboarding guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create.html">Creating a new application on Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manage.html">Managing applications with Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../monitor.html">Monitoring your applications and infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../access.html">Controlling access to Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../insight.html">Acquia Insight</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../develop.html">Developing applications on Acquia Cloud</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="api.html">Developing with the Cloud API</a></li>
<li class="toctree-l3"><a class="reference internal" href="baseurl.html">Setting $base_url without breaking the Development and Staging environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="checkout.html">Checking out a local copy of your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="clean.html">Copying your code to a new Git repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="code.html">Working with code</a></li>
<li class="toctree-l3"><a class="reference internal" href="config-d8.html">Configuration management for Drupal 8</a></li>
<li class="toctree-l3"><a class="reference internal" href="drupal.html">Developing a Drupal application on Acquia Cloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="env-variable.html">Using environment variables in Drupal code and Drush commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoip.html">Using GeoIP information</a></li>
<li class="toctree-l3"><a class="reference internal" href="github.html">Using Acquia Cloud with a remote repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="httprl.html">Using the HTTPRL module</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-module.html">Installing a Drupal module on Acquia Cloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="keys.html">Managing your product keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="ldap.html">Using LDAP with an Acquia Cloud application</a></li>
<li class="toctree-l3"><a class="reference internal" href="ldaps.html">Configuring LDAPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="livedev.html">Using Live Development mode to change code on your server</a></li>
<li class="toctree-l3"><a class="reference internal" href="livedev-workflow.html">Live Development workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="mobile.html">Enabling device-based redirects</a></li>
<li class="toctree-l3"><a class="reference internal" href="module-update-alerts.html">Stopping non-production environments from sending module update alerts</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Adding non-Drupal PHP extensions or libraries to your application</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipelines.html">Using pipelines for site development and testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish.html">Publishing your application</a></li>
<li class="toctree-l3"><a class="reference internal" href="repository.html">Using your code repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="requestid.html">Using HTTP request IDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="rsync.html">rsyncing files on Acquia Cloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="update.html">Sending updates to your code repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html">Upgrading Drupal core on Acquia Cloud</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../node-js.html">Node.js and Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../container.html">Containers in Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../performance.html">Improving application performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subs.html">Managing subscriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cd.html">Acquia Cloud CD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Acquia Cloud glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../known-issues.html">Known issues in Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html">Release notes - Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../self-service-scaling.html">Using a Cloud Service Management plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssl.html">Enabling SSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../teams.html">Managing users, teams, roles, and permissions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../edge.html">Acquia Cloud Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../shield.html">Acquia Cloud Shield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../site-factory.html">Acquia Cloud Site Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commerce.html">Acquia Commerce Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dam.html">Acquia DAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-desktop.html">Acquia Dev Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../journey.html">Acquia Journey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lift.html">Acquia Lift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">Acquia Platform APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../acquia-search.html">Acquia Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Developer tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lightning.html">Lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Acquia Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ra.html">Remote Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resource.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">Acquia Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide.html">Products and Services Guide</a></li>
</ul>

      </div>
  </div>
    
    <div id="content" class="small-8 large-9 columns">
        
            
  <div class="section" id="adding-non-drupal-php-extensions-or-libraries-to-your-application">
<h1>Adding non-Drupal PHP extensions or libraries to your application<a class="headerlink" href="#adding-non-drupal-php-extensions-or-libraries-to-your-application" title="Permalink to this headline">¶</a></h1>
<p>The Acquia Cloud platform includes a standard set of PHP extensions that are available on all servers. Your application might, however, require additional PHP extensions to support its own desired features. Acquia Cloud Enterprise and Acquia Cloud Site Factory customers can compile and deploy PHP extensions or libraries, and then Acquia can enable them on your Acquia Cloud environments.</p>
<p>The Apache servers for your Acquia Cloud environments serve everything in the <code class="docutils literal"><span class="pre">/docroot</span></code> directory and ignore files that are not in <code class="docutils literal"><span class="pre">/docroot</span></code>. Your repository contains a <code class="docutils literal"><span class="pre">/library</span></code> subdirectory that you can use for PHP code libraries. (This is located in the <code class="docutils literal"><span class="pre">/</span></code> directory of Git repositories.) The <code class="docutils literal"><span class="pre">/library</span></code> subdirectory is part of your default PHP <code class="docutils literal"><span class="pre">include_path</span></code> and is outside of <code class="docutils literal"><span class="pre">/docroot</span></code>, so it] will not be served by Apache.</p>
<p>If any PHP library does not work as expected, examine your environment’s <code class="docutils literal"><span class="pre">php-error.log</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Acquia does not guarantee that any PHP extensions used in this manner will function as expected, and we will not assist with troubleshooting extensions that do not function as expected. Also note the limitations under <a class="reference external" href="#unsupported">Unsupported software</a>.</p>
</div>
<div class="section" id="compiling-php-libraries">
<span id="compile"></span><h2>Compiling PHP libraries<a class="headerlink" href="#compiling-php-libraries" title="Permalink to this headline">¶</a></h2>
<p>You must compile the PHP extensions (<code class="docutils literal"><span class="pre">.so</span></code> files) and libraries that you require and commit them to your code repository. Here is an article that may help you:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.sitepoint.com/install-php-extensions-source/">How to install PHP Extensions from Source</a></li>
</ul>
<p>The compiled shared extension (the <code class="docutils literal"><span class="pre">.so</span></code> file) must itself contain any libraries on which it depends. This is called static linking. The goal is that when you run <code class="docutils literal"><span class="pre">ldd</span></code> on the <code class="docutils literal"><span class="pre">.so</span></code> file in the Acquia Cloud environment, all of the dependencies are met without manipulating the <code class="docutils literal"><span class="pre">LD_LIBRARY_PATH</span></code>. Acquia does not provide support for this process. Here are two articles that may help guide you in understanding the (frequently complex) issues involved:</p>
<ul class="simple">
<li><a class="reference external" href="http://prefetch.net/articles/linkers.badldlibrary.html">LD_LIBRARY_PATH Is Not The Answer</a></li>
<li><a class="reference external" href="http://stackoverflow.com/questions/9952146/proper-way-to-link-a-static-library-using-gcc">Proper way to link a static library using GCC</a></li>
</ul>
<p>You must compile them for the same operating system version that your Acquia Cloud environments are running. To determine the operating system version, <a class="reference external" href="/acquia-cloud/ssh">connect to your environments with SSH</a> and run this command:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>lsb_release -c
</pre></div>
</div>
<div class="section" id="check-for-dependencies">
<span id="depend"></span><h3>Check for dependencies<a class="headerlink" href="#check-for-dependencies" title="Permalink to this headline">¶</a></h3>
<p>The compiled PHP extension must contain any dependent libraries not already found on your server. To test this, navigate to the PHP extension’s folder in your <code class="docutils literal"><span class="pre">/library</span></code> directory on your environment and run <code class="docutils literal"><span class="pre">ldd</span> <span class="pre">extension.so</span></code>, being sure to replace <code class="docutils literal"><span class="pre">extension.so</span></code> with the name of the actual <code class="docutils literal"><span class="pre">.so</span></code> file you have compiled. When you run <code class="docutils literal"><span class="pre">ldd</span></code> on the <code class="docutils literal"><span class="pre">.so</span></code> file in the Acquia environment, all of the dependencies must be met without manipulating the <code class="docutils literal"><span class="pre">LD_LIBRARY_PATH</span></code>.</p>
<p>The following is an example of a compiled extension that does not have the required libraries on the environment or statically linked to the compiled extension:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>sitename@server-1234:/var/www/html/sitename.dev/library$ ldd ssh2.so
linux-vdso.so.1 =&gt;  (0x00007fff071ff000)
libssh2.so.1 =&gt; not found
libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2ea56b5000)
/lib64/ld-linux-x86-64.so.2 (0x00007f2ea5c92000)
</pre></div>
</div>
<p>In this example, one of the requirements was not found.</p>
</div>
</div>
<div class="section" id="deploying-php-extensions">
<h2>Deploying PHP extensions<a class="headerlink" href="#deploying-php-extensions" title="Permalink to this headline">¶</a></h2>
<p>You must deploy the version of code that contains this change to whichever environments you need the code to be enabled on. For example, if you commit your code to the <code class="docutils literal"><span class="pre">master</span></code> branch, the extension can be enabled only on environments running <code class="docutils literal"><span class="pre">master</span></code> or a branch or tag pulled from <code class="docutils literal"><span class="pre">master</span></code> after the change was submitted. Otherwise, the files will be missing.</p>
<p>For example, to use a custom PHP library called <code class="docutils literal"><span class="pre">my.php</span></code> with your application, commit it to the <code class="docutils literal"><span class="pre">/library</span></code> directory in your Git repository, and then use the following statement in your Drupal code, in the file where you make a call to the custom library:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="x">include_once &quot;my.php&quot;;</span>
</pre></div>
</div>
</div>
<div class="section" id="enabling-php-extensions">
<h2>Enabling PHP extensions<a class="headerlink" href="#enabling-php-extensions" title="Permalink to this headline">¶</a></h2>
<p>Once you have compiled and deployed your PHP extension, you need to get it enabled on your Acquia Cloud environments. To do so, file a ticket with Acquia Support. The ticket must specify the location of the compiled extensions, as well as a very brief summary of their intended purpose. Once Acquia has reviewed and approved the request, we will modify the <code class="docutils literal"><span class="pre">php.ini</span></code> files in your environments to point to each compiled extension in your code repository. This typically takes one or two business days.</p>
<div class="section" id="enabling-php-imap-or-xdebug">
<span id="imap"></span><h3>Enabling PHP IMAP or xdebug<a class="headerlink" href="#enabling-php-imap-or-xdebug" title="Permalink to this headline">¶</a></h3>
<p>The PHP <code class="docutils literal"><span class="pre">IMAP</span></code> and <code class="docutils literal"><span class="pre">xdebug</span></code> extensions are present, but disabled by default on Acquia Cloud. If you want to use either PHP <code class="docutils literal"><span class="pre">IMAP</span></code> or <code class="docutils literal"><span class="pre">xdebug</span></code>, you do not need to compile and deploy it. You need only to file an Acquia Support ticket and request that it be enabled.</p>
</div>
</div>
<div class="section" id="unsupported-software">
<h2>Unsupported software<a class="headerlink" href="#unsupported-software" title="Permalink to this headline">¶</a></h2>
<p>Acquia Cloud does not support the following software:</p>
<ul class="simple">
<li>Moodle (not compatible with high availability)</li>
<li>piwik (Acquia has repeatedly seen this cause performance issues)</li>
<li>Any non-Drupal CMS</li>
<li>CA Single Sign-on (formerly CA SiteMInder)</li>
</ul>
<p>You cannot install the following software on Acquia Cloud:</p>
<ul class="simple">
<li>Custom daemons or services, such as Jabber or Microsoft Exchange</li>
<li>Custom package installations that require <code class="docutils literal"><span class="pre">apt-get</span></code>; you can still install custom executables using your code repository</li>
</ul>
</div>
</div>


        
    </div>
</div>

    
<div class="row">
    <div class="small-4 large-3 columns"></div>
    <div id="relinks" class="small-8 large-9 columns">
        <div class="pagination-wrapper">
            <div class="prev">
                <a href="module-update-alerts.html" title="Stopping non-production environments from sending module update alerts"><b>‹&nbsp;</b>Stopping non-production environments from sending module update alerts</a>
            </div>
            
            <div class="next">
                <a href="pipelines.html" title="Using pipelines for site development and testing">Using pipelines for site development and testing<b>&nbsp;›</b></a>
            </div>
            
        </div>
    </div>
</div>



    
<div class="assistance-wrapper">
	<div class="assistance-tbl">
		<div class="col">
			<p><img src="/_static/phone.png" alt="Contact support">Still need assistance? <strong><a href="https://docs.acquia.com/support">Contact Acquia Support</a></strong></p>
		</div>
	</div>
</div>
<div class="support">
	<div class="support-tbl">
		<div class="col left">
			<h2><a href="https://www.acquia.com/customer-success/acquia-global-support">Support</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/support">Contact Support</a></li>
			</ul>
		</div>
		<div class="col middle">
			<h2><a href="https://www.acquia.com/about-us">About Acquia</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/about-us">About Us</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/leadership">Leadership</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/board">Board of Directors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/investors">Investors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/newsroom">Newsroom</a></li>
				<li><a class="light-link" href="https://www.acquia.com/careers">Careers</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/contact">Contact Us</a></li>
			</ul>
			<ul class="social-media">
				<li>
					<a class="fa fa-twitter fa-lg ext" href="https://twitter.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Twitter</span>
					</a>
				</li>
				<li>
					<a class="fa fa-facebook fa-lg ext" href="https://www.facebook.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Facebook</span>
					</a>
				</li>
				<li>
					<a class="fa fa-github-alt fa-lg ext" href="https://github.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Github</span>
					</a>
				</li>
				<li>
					<a class="fa fa-linkedin-in fa-lg ext" href="http://www.linkedin.com/company/167056" target="_blank" rel="nofollow">
						<span class="hide">LinkedIn</span>
					</a>
				</li>
				<li>
					<a class="fa fa-google-plus-g fa-lg ext" href="https://plus.google.com/+acquia" target="_blank" rel="nofollow">
						<span class="hide">Google+</span>
					</a>
				</li>
				<li>
					<a class="fa fa-play fa-lg ext" href="https://www.youtube.com/user/AcquiaTV" target="_blank" rel="nofollow">
						<span class="hide">YouTube</span>
					</a>
				</li>
				<li>
					<a class="fa fa-envelope fa-lg" href="https://www.acquia.com/about-us/contact">
						<span class="hide">Contact Us</span>
					</a>
				</li>
			</ul>
		</div>
		<div class="col right">
			<div class="centered">
				<p>
					<img alt="Acquia: Think Ahead" src="/_static/acquia-logo-think-ahead-black-small.svg">
				</p>
				<p class="margin-left-half">
					<span>53 State Street, 10th Floor<br>
					Boston, MA 02109<br>
					United States<br>
					Phone: 888-922-7842</span><br>
					Map: <a class="decorate ext" href="http://maps.google.com/?q=42.358429+-71.056184+%2853+State+Street%2C+10th+Floor%2C+Boston%2C+MA%2C+02109%2C+us%29" target="_blank" rel="nofollow">Google Maps<span class="ext"><span class="element-invisible"> </span></span></a><br><a class="decorate" href="https://www.acquia.com/about-us/contact#block-views-locations-block-1">View other locations</a>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="top-bar row column">
	<div class="footer" role="contentinfo">Copyright &copy 2018 Acquia Inc. All Rights Reserved. </br>Drupal is a registered trademark of <a href="https://dri.es/">Dries Buytaert</a>. All product names, logos, and brands are property of their respective owners.
    </div>
</div>
    </div>

    <script> $(document).foundation() </script>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','2_Wi1aQvEeu61haxG8TX','2.0.0');
    </script>

  </body>
</html>