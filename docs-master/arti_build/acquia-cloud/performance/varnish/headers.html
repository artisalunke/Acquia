
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Varnish headers &#8212; Acquia Help Center</title>
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/foundation-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/what-input/what-input.min.js"></script>
    <script type="text/javascript" src="../../../_static/foundation-sites/foundation.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Manually purging a page from Varnish cache" href="manually-purge.html" />
    <link rel="prev" title="Custom Varnish configuration for Acquia Cloud Enterprise applications" href="custom.html" /> 
  </head>
  <body>

    
<header>
<div class="topbar">
    <div class="col left">
        <a href="/" title="Acquia Help Center Home" class="logo">Acquia Help Center</a>
    </div>
    <div class="col right">
      <ul class="main-nav">
        <li>
          <a href="https://www.acquia.com" title="Go to www.acquia.com for our latest information.">Acquia.com</a>
        </li>
        <li>
            <a href="https://dev.acquia.com" title="Acquia's Developer Center: developers.acquia.com">Developers</a>
        </li>
        <li>
            <a href="https://training.acquia.com" title="Go to training.acquia.com to find out about courses and certifications.">Training</a>
        </li>
        <li>
            <a href="/site-search" data-drupal-link-system-path="site-search">Search</a>
        </li>
      </ul>
    </div>
</div>
<div class="bottombar">
    <div class="searchbar-wrapper">
        <form action="search.html" method="get" class="searchbar">
            <div class="search-title">Need help finding something? <strong>Start Here.</strong></div>
            <div class="search-box">
                <input type="search" name="q" maxlength="128" size="15" value="" class="st-default-search-input">
                <input type="hidden" name="check_keywords" value="yes">
                <input type="hidden" name="area" value="default">
            </div>
            <div class="search-btn">
                <input class="btn-search button" type="submit" id="edit-submit-acquia-search" value="Search Docs">
            </div>
        </form>
    </div>
	</div>
</header>



    
<div class="breadcrumbs-wrapper">
	<ul>
        
        <li><a href="../../../index.html">Home</a></li>
        
        <li><a href="../../../acquia-cloud.html" >Acquia Cloud</a></li>
        <li><a href="../../performance.html" >Improving application performance</a></li>
        <li><a href="../varnish.html" accesskey="U">Using Varnish</a></li>
        <li class="current">Varnish headers</li>
	</ul>
</div>


<div class="row">
    
        
  <div class="small-4 large-3 columns" id="sidebar" data-sticky-container>
      <div class="sticky" data-sticky data-margin-top="0"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../acquia-cloud.html">Acquia Cloud</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../free.html">Getting started with Acquia Cloud Free</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloud-ui.html">Using the Acquia Cloud interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch.html">Acquia Cloud architecture and key concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ready.html">Acquia Cloud onboarding guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../create.html">Creating a new application on Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manage.html">Managing applications with Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../monitor.html">Monitoring your applications and infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../access.html">Controlling access to Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../insight.html">Acquia Insight</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../develop.html">Developing applications on Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../node-js.html">Node.js and Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../container.html">Containers in Acquia Cloud</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../performance.html">Improving application performance</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../load.html">Load and stress testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../load-requirements.html">Load testing requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../memcached.html">Using Memcached</a></li>
<li class="toctree-l3"><a class="reference internal" href="../php-timeouts.html">Troubleshooting PHP timeouts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../request-log.html">Analyzing the Drupal request log</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../varnish.html">Using Varnish</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="custom.html">Custom Varnish configuration for Acquia Cloud Enterprise applications</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Varnish headers</a></li>
<li class="toctree-l4"><a class="reference internal" href="manually-purge.html">Manually purging a page from Varnish cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="purging.html">Purging Varnish cache on Acquia Cloud</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../subs.html">Managing subscriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cd.html">Acquia Cloud CD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Acquia Cloud glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../known-issues.html">Known issues in Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../release-notes.html">Release notes - Acquia Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../self-service-scaling.html">Using a Cloud Service Management plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ssl.html">Enabling SSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../teams.html">Managing users, teams, roles, and permissions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../edge.html">Acquia Cloud Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../shield.html">Acquia Cloud Shield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../site-factory.html">Acquia Cloud Site Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../commerce.html">Acquia Commerce Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dam.html">Acquia DAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-desktop.html">Acquia Dev Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../journey.html">Acquia Journey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../lift.html">Acquia Lift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">Acquia Platform APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../acquia-search.html">Acquia Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devtools.html">Developer tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../lightning.html">Lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../support.html">Acquia Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ra.html">Remote Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resource.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Acquia Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guide.html">Products and Services Guide</a></li>
</ul>

      </div>
  </div>
    
    <div id="content" class="small-8 large-9 columns">
        
            
  <div class="section" id="varnish-headers">
<h1>Varnish headers<a class="headerlink" href="#varnish-headers" title="Permalink to this headline">¶</a></h1>
<p>Acquia Cloud uses Varnish caching to increase an application’s
perceived performance for visitors. For more information about Varnish,
see <a class="reference external" href="/acquia-cloud/performance/varnish">Using Varnish</a>. Using
developer tools integrated with your browser, you can examine the
Varnish caching headers sent with each page and item request to see how
Varnish caching is working with your application.</p>
<p>To examine what Varnish is doing (or not doing) on one of the pages in
your application, examine the values of the Varnish cache headers for
the page.</p>
<p>To view these headers, use one of the <a class="reference external" href="/resource/browser-tool">development
tools</a> available for your web browser to view
a served web page’s Varnish headers. Your installed browser may already
include a set of development tools that you can use. You can also run
the following command from a command prompt:</p>
<p><code class="docutils literal"><span class="pre">curl</span> <span class="pre">-sSLIXGET</span> <span class="pre">urlname</span></code></p>
<p>The following are some of the headers you should see:</p>
<ul>
<li><p class="first"><strong>Age</strong> - The amount of time the served item was in the cache, in
seconds. If the age is zero, the item was not served from the Varnish
cache</p>
</li>
<li><p class="first"><strong>Cache-Control</strong> - The directives that must be applied by all
caching mechanisms (from Varnish to the browser cache)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the field has the value
<code class="docutils literal"><span class="pre">no-cache,</span> <span class="pre">must-revalidate,</span> <span class="pre">post-check=0</span></code> or <code class="docutils literal"><span class="pre">pre-check=0</span></code>, this
item instructs any upstream proxy layers (such as Acquia load
balancers or a CDN) to not cache. This header generally is used when
Drupal page caching is disabled. Acquia recommends that you verify
that this value is present on all of your website’s pages. If it is,
enable caching, and consider using <a class="reference external" href="/article/installing-acquia-purge">Acquia
Purge</a> for cache invalidation.</p>
</div>
</li>
<li><p class="first"><strong>Server</strong> - The web server application acting as a load balancer
that is used to serve the content (currently <code class="docutils literal"><span class="pre">nginx</span></code>)</p>
</li>
<li><p class="first"><strong>Via</strong> - The version of HTTP over which the request was sent
(currently <code class="docutils literal"><span class="pre">1.1</span></code>)</p>
</li>
<li><p class="first"><strong>X-AH-Environment</strong> - The Acquia environment that provides the page
response (usually <code class="docutils literal"><span class="pre">prod</span></code>, but could also be <code class="docutils literal"><span class="pre">dev</span></code> or <code class="docutils literal"><span class="pre">stage</span></code>)</p>
</li>
<li><p class="first"><strong>X-Cache</strong> - Either <code class="docutils literal"><span class="pre">HIT</span></code> or <code class="docutils literal"><span class="pre">MISS</span></code> depending on whether or not
the item was served from the Varnish cache</p>
</li>
<li><p class="first"><strong>X-Cache-Hits</strong> - The number of times this object has been served
from cache. Higher numbers indicate that this URL has received more
visitors.</p>
</li>
<li><p class="first"><strong>X-Drupal-Cache</strong> - Similar to <code class="docutils literal"><span class="pre">X-Cache</span></code>, this header indicates
the outcome of Drupal’s page cache with <code class="docutils literal"><span class="pre">HIT</span></code> or <code class="docutils literal"><span class="pre">MISS</span></code> values. A
<code class="docutils literal"><span class="pre">MISS</span></code> value is <a class="reference external" href="/article/varnish-cache-hits-and-drupal-cache-miss">not unusual
here</a>.</p>
</li>
<li><p class="first"><strong>X-Generator</strong> - The software used to create the page (on
Acquia Cloud, this says <code class="docutils literal"><span class="pre">Drupal</span></code> along with the core version
number)</p>
</li>
<li><p class="first"><strong>X-Request-ID</strong> - The request ID for a given request</p>
</li>
<li><p class="first"><strong>X-Varnish</strong> - The ID numbers of the current request and the item
request that populated the Varnish cache.
If this field has only one value, the cache was populated by the
request, and this is counted as a <em>cache miss</em></p>
</li>
<li><p class="first"><strong>Vary</strong> - The inbound HTTP request headers that need to be taken
into account when caching a single URL.
The most common example is <code class="docutils literal"><span class="pre">Accept-Encoding</span></code> — a header that
browsers usually send to websites to indicate whether they want the
returned page compressed using gzip or the deflate compression
algorithm. This can prevent serving gzip-compressed pages from cache
to older browsers that do not support it.</p>
</li>
</ul>
<div class="section" id="other-headers">
<span id="other"></span><h2>Other headers<a class="headerlink" href="#other-headers" title="Permalink to this headline">¶</a></h2>
<p>Varnish on Acquia Cloud also contains headers that enable caching
for some HTTP response codes, in instances where this behavior is
necessary. The header is:</p>
<p><code class="docutils literal"><span class="pre">X-Acquia-No-301-404-Caching-Enforcement</span></code></p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Acquia strongly recommends against using these headers as they may
compromise the stability of your website.</p>
</div>
<p>Your Acquia load balancers cache all <code class="docutils literal"><span class="pre">HTTP</span> <span class="pre">301</span></code> and <code class="docutils literal"><span class="pre">HTTP</span> <span class="pre">404</span></code>
responses for a minimum of 15 minutes to prevent cache stampedes and
general performance degradation under high-traffic scenarios, such as
load tests and DDOS attacks. This behavior may theoretically be
undesirable in some cases; setting the
<code class="docutils literal"><span class="pre">X-Acquia-No-301-404-Caching-Enforcement</span> <span class="pre">HTTP</span></code> response header can be
used to bypass this requirement.</p>
</div>
</div>


        
    </div>
</div>

    
<div class="row">
    <div class="small-4 large-3 columns"></div>
    <div id="relinks" class="small-8 large-9 columns">
        <div class="pagination-wrapper">
            <div class="prev">
                <a href="custom.html" title="Custom Varnish configuration for Acquia Cloud Enterprise applications"><b>‹&nbsp;</b>Custom Varnish configuration for Acquia Cloud Enterprise applications</a>
            </div>
            
            <div class="next">
                <a href="manually-purge.html" title="Manually purging a page from Varnish cache">Manually purging a page from Varnish cache<b>&nbsp;›</b></a>
            </div>
            
        </div>
    </div>
</div>



    
<div class="assistance-wrapper">
	<div class="assistance-tbl">
		<div class="col">
			<p><img src="/_static/phone.png" alt="Contact support">Still need assistance? <strong><a href="https://docs.acquia.com/support">Contact Acquia Support</a></strong></p>
		</div>
	</div>
</div>
<div class="support">
	<div class="support-tbl">
		<div class="col left">
			<h2><a href="https://www.acquia.com/customer-success/acquia-global-support">Support</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/support">Contact Support</a></li>
			</ul>
		</div>
		<div class="col middle">
			<h2><a href="https://www.acquia.com/about-us">About Acquia</a></h2>
			<ul class="no-bullet">
				<li><a class="light-link" href="https://www.acquia.com/about-us">About Us</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/leadership">Leadership</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/board">Board of Directors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/investors">Investors</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/newsroom">Newsroom</a></li>
				<li><a class="light-link" href="https://www.acquia.com/careers">Careers</a></li>
				<li><a class="light-link" href="https://www.acquia.com/about-us/contact">Contact Us</a></li>
			</ul>
			<ul class="social-media">
				<li>
					<a class="fa fa-twitter fa-lg ext" href="https://twitter.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Twitter</span>
					</a>
				</li>
				<li>
					<a class="fa fa-facebook fa-lg ext" href="https://www.facebook.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Facebook</span>
					</a>
				</li>
				<li>
					<a class="fa fa-github-alt fa-lg ext" href="https://github.com/acquia" target="_blank" rel="nofollow">
						<span class="hide">Github</span>
					</a>
				</li>
				<li>
					<a class="fa fa-linkedin-in fa-lg ext" href="http://www.linkedin.com/company/167056" target="_blank" rel="nofollow">
						<span class="hide">LinkedIn</span>
					</a>
				</li>
				<li>
					<a class="fa fa-google-plus-g fa-lg ext" href="https://plus.google.com/+acquia" target="_blank" rel="nofollow">
						<span class="hide">Google+</span>
					</a>
				</li>
				<li>
					<a class="fa fa-play fa-lg ext" href="https://www.youtube.com/user/AcquiaTV" target="_blank" rel="nofollow">
						<span class="hide">YouTube</span>
					</a>
				</li>
				<li>
					<a class="fa fa-envelope fa-lg" href="https://www.acquia.com/about-us/contact">
						<span class="hide">Contact Us</span>
					</a>
				</li>
			</ul>
		</div>
		<div class="col right">
			<div class="centered">
				<p>
					<img alt="Acquia: Think Ahead" src="/_static/acquia-logo-think-ahead-black-small.svg">
				</p>
				<p class="margin-left-half">
					<span>53 State Street, 10th Floor<br>
					Boston, MA 02109<br>
					United States<br>
					Phone: 888-922-7842</span><br>
					Map: <a class="decorate ext" href="http://maps.google.com/?q=42.358429+-71.056184+%2853+State+Street%2C+10th+Floor%2C+Boston%2C+MA%2C+02109%2C+us%29" target="_blank" rel="nofollow">Google Maps<span class="ext"><span class="element-invisible"> </span></span></a><br><a class="decorate" href="https://www.acquia.com/about-us/contact#block-views-locations-block-1">View other locations</a>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="top-bar row column">
	<div class="footer" role="contentinfo">Copyright &copy 2018 Acquia Inc. All Rights Reserved. </br>Drupal is a registered trademark of <a href="https://dri.es/">Dries Buytaert</a>. All product names, logos, and brands are property of their respective owners.
    </div>
</div>
    </div>

    <script> $(document).foundation() </script>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','2_Wi1aQvEeu61haxG8TX','2.0.0');
    </script>

  </body>
</html>